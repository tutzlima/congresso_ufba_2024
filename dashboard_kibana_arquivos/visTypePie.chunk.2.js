(window.visTypePie_bundle_jsonpfunction=window.visTypePie_bundle_jsonpfunction||[]).push([[2],{42:function(e,t,s){"use strict";s.r(t),s.d(t,"default",(function(){return P}));var a=s(11),i=s.n(a),l=s(5),n=s.n(l),o=s(19),u=s(16),d=s(0),r=s(10),c=s(20),p=s(3);function b({disabled:e,value:t=null,setValue:s}){return Object(p.jsx)(u.EuiFormRow,{label:d.i18n.translate("visTypePie.controls.truncateLabel",{defaultMessage:"Truncate"}),fullWidth:!0,display:"rowCompressed",labelAppend:Object(p.jsx)(u.EuiIconTip,{content:d.i18n.translate("visTypePie.controls.truncateTooltip",{defaultMessage:"Number of characters for labels positioned outside the chart."}),position:"top",type:"iInCircle",color:"subdued"})},Object(p.jsx)(u.EuiFieldNumber,{"data-test-subj":"pieLabelTruncateInput",disabled:e,value:t||"",onChange:e=>s("truncate",""===e.target.value?null:parseFloat(e.target.value)),fullWidth:!0,compressed:!0}))}var v=s(4),j=s(7);const g=[{text:d.i18n.translate("visTypePie.labelPositions.insideText",{defaultMessage:"Inside"}),value:j.a.INSIDE},{text:d.i18n.translate("visTypePie.labelPositions.insideOrOutsideText",{defaultMessage:"Inside or outside"}),value:j.a.DEFAULT}],m=[{text:d.i18n.translate("visTypePie.valuesFormats.percent",{defaultMessage:"Show percent"}),value:j.b.PERCENT},{text:d.i18n.translate("visTypePie.valuesFormats.value",{defaultMessage:"Show value"}),value:j.b.VALUE}];var O=s(9);const T=[{text:d.i18n.translate("visTypePie.legendPositions.topText",{defaultMessage:"Top"}),value:O.Position.Top},{text:d.i18n.translate("visTypePie.legendPositions.leftText",{defaultMessage:"Left"}),value:O.Position.Left},{text:d.i18n.translate("visTypePie.legendPositions.rightText",{defaultMessage:"Right"}),value:O.Position.Right},{text:d.i18n.translate("visTypePie.legendPositions.bottomText",{defaultMessage:"Bottom"}),value:O.Position.Bottom}];function x({paramName:e,value:t,setValue:s}){return Object(p.jsx)(u.EuiFormRow,{fullWidth:!0,label:d.i18n.translate("visTypePie.editors.pie.decimalSliderLabel",{defaultMessage:"Maximum decimal places for percent"}),"data-test-subj":"visTypePieValueDecimals"},Object(p.jsx)(u.EuiRange,{value:t,min:0,max:4,showInput:!0,compressed:!0,onChange:t=>{s(e,Number(t.currentTarget.value))}}))}const P=e=>{var t,s,a,O,P,h,L;const{stateParams:E,setValue:f,aggs:w}=e,S=(e,t)=>f("labels",{...E.labels,[e]:t}),y=null===(t=e.uiState)||void 0===t?void 0:t.get("vis.legendOpen"),[M,C]=Object(l.useState)(void 0),[I,N]=Object(l.useState)((()=>{var t;const s=null!=E.addLegend&&E.addLegend;return null===(t=e.uiState)||void 0===t?void 0:t.get("vis.legendOpen",s)})),F=Boolean(null==w||null===(s=w.aggs)||void 0===s?void 0:s.find((e=>"split"===e.schema&&e.enabled))),V=null!==(a=null==w||null===(O=w.aggs)||void 0===O?void 0:O.filter((e=>"segment"===e.schema&&e.enabled)))&&void 0!==a?a:[];return Object(l.useEffect)((()=>{N(y)}),[y]),Object(l.useEffect)((()=>{(async()=>{var t;const s=await(null===(t=e.palettes)||void 0===t?void 0:t.getPalettes());C(s)})()}),[e.palettes]),Object(p.jsx)(n.a.Fragment,null,Object(p.jsx)(u.EuiPanel,{paddingSize:"s"},Object(p.jsx)(u.EuiTitle,{size:"xs"},Object(p.jsx)("h3",null,Object(p.jsx)(r.FormattedMessage,{id:"visTypePie.editors.pie.pieSettingsTitle",defaultMessage:"Pie settings"}))),Object(p.jsx)(u.EuiSpacer,{size:"s"}),Object(p.jsx)(c.SwitchOption,{label:d.i18n.translate("visTypePie.editors.pie.donutLabel",{defaultMessage:"Donut"}),paramName:"isDonut",value:E.isDonut,setValue:f}),Object(p.jsx)(c.BasicOptions,i()({},e,{legendPositions:T})),e.showElasticChartsOptions&&Object(p.jsx)(n.a.Fragment,null,Object(p.jsx)(u.EuiFormRow,null,Object(p.jsx)(u.EuiFlexGroup,{alignItems:"center",gutterSize:"xs",responsive:!1},Object(p.jsx)(u.EuiFlexItem,{grow:!1},Object(p.jsx)(c.SwitchOption,{label:d.i18n.translate("visTypePie.editors.pie.distinctColorsLabel",{defaultMessage:"Use distinct colors per slice"}),paramName:"distinctColors",value:E.distinctColors,disabled:(null==V?void 0:V.length)<=1&&!F,setValue:f,"data-test-subj":"visTypePiedistinctColorsSwitch"})),Object(p.jsx)(u.EuiFlexItem,{grow:!1},Object(p.jsx)(u.EuiIconTip,{content:"Use with multi-layer chart or multiple charts.",position:"top",type:"iInCircle",color:"subdued"})))),Object(p.jsx)(c.SwitchOption,{label:d.i18n.translate("visTypePie.editors.pie.addLegendLabel",{defaultMessage:"Show legend"}),paramName:"addLegend",value:I,setValue:(e,t)=>{N(t),f(e,t)},"data-test-subj":"visTypePieAddLegendSwitch"}),Object(p.jsx)(c.SwitchOption,{label:d.i18n.translate("visTypePie.editors.pie.nestedLegendLabel",{defaultMessage:"Nest legend"}),paramName:"nestedLegend",value:E.nestedLegend,disabled:!E.addLegend,setValue:(t,s)=>{e.trackUiMetric&&e.trackUiMetric(o.METRIC_TYPE.CLICK,"nested_legend_switched"),f(t,s)},"data-test-subj":"visTypePieNestedLegendSwitch"}),Object(p.jsx)(c.LongLegendOptions,{"data-test-subj":"pieLongLegendsOptions",truncateLegend:null===(P=E.truncateLegend)||void 0===P||P,maxLegendLines:null!==(h=E.maxLegendLines)&&void 0!==h?h:1,setValue:f})),e.showElasticChartsOptions&&M&&Object(p.jsx)(c.PalettePicker,{palettes:M,activePalette:E.palette,paramName:"palette",setPalette:(t,s)=>{e.trackUiMetric&&e.trackUiMetric(o.METRIC_TYPE.CLICK,"palette_selected"),f(t,s)}})),Object(p.jsx)(u.EuiSpacer,{size:"s"}),Object(p.jsx)(u.EuiPanel,{paddingSize:"s"},Object(p.jsx)(u.EuiTitle,{size:"xs"},Object(p.jsx)("h3",null,Object(p.jsx)(r.FormattedMessage,{id:"visTypePie.editors.pie.labelsSettingsTitle",defaultMessage:"Labels settings"}))),Object(p.jsx)(u.EuiSpacer,{size:"s"}),Object(p.jsx)(c.SwitchOption,{label:d.i18n.translate("visTypePie.editors.pie.showLabelsLabel",{defaultMessage:"Show labels"}),paramName:"show",value:E.labels.show,setValue:S}),e.showElasticChartsOptions&&Object(p.jsx)(c.SelectOption,{label:d.i18n.translate("visTypePie.editors.pie.labelPositionLabel",{defaultMessage:"Label position"}),disabled:!E.labels.show||F,options:g,paramName:"position",value:F?j.a.INSIDE:E.labels.position||j.a.DEFAULT,setValue:(t,s)=>{e.trackUiMetric&&e.trackUiMetric(o.METRIC_TYPE.CLICK,"label_position_selected"),S(t,s)},"data-test-subj":"visTypePieLabelPositionSelect"}),Object(p.jsx)(c.SwitchOption,{label:d.i18n.translate("visTypePie.editors.pie.showTopLevelOnlyLabel",{defaultMessage:"Show top level only"}),disabled:!E.labels.show||e.showElasticChartsOptions&&E.labels.position===j.a.INSIDE,paramName:"last_level",value:E.labels.last_level,setValue:S,"data-test-subj":"visTypePieTopLevelSwitch"}),Object(p.jsx)(c.SwitchOption,{label:d.i18n.translate("visTypePie.editors.pie.showValuesLabel",{defaultMessage:"Show values"}),disabled:!E.labels.show,paramName:"values",value:E.labels.values,setValue:S}),e.showElasticChartsOptions&&Object(p.jsx)(n.a.Fragment,null,Object(p.jsx)(c.SelectOption,{label:d.i18n.translate("visTypePie.editors.pie.valueFormatsLabel",{defaultMessage:"Values"}),disabled:!E.labels.values,options:m,paramName:"valuesFormat",value:E.labels.valuesFormat||j.b.PERCENT,setValue:(t,s)=>{e.trackUiMetric&&e.trackUiMetric(o.METRIC_TYPE.CLICK,"values_format_selected"),S(t,s)},"data-test-subj":"visTypePieValueFormatsSelect"}),Object(p.jsx)(x,{paramName:"percentDecimals",value:null!==(L=E.labels.percentDecimals)&&void 0!==L?L:v.DEFAULT_PERCENT_DECIMALS,setValue:S})),Object(p.jsx)(b,{value:E.labels.truncate,setValue:S,disabled:e.showElasticChartsOptions&&E.labels.position===j.a.INSIDE})))}}}]);