(window.visTypeTable_bundle_jsonpfunction=window.visTypeTable_bundle_jsonpfunction||[]).push([[1],{21:function(t,e,r){"use strict";var o,a=function(){return void 0===o&&(o=Boolean(window&&document&&document.all&&!window.atob)),o},n=function(){var t={};return function(e){if(void 0===t[e]){var r=document.querySelector(e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}t[e]=r}return t[e]}}(),i=[];function l(t){for(var e=-1,r=0;r<i.length;r++)if(i[r].identifier===t){e=r;break}return e}function s(t,e){for(var r={},o=[],a=0;a<t.length;a++){var n=t[a],s=e.base?n[0]+e.base:n[0],c=r[s]||0,u="".concat(s," ").concat(c);r[s]=c+1;var d=l(u),b={css:n[1],media:n[2],sourceMap:n[3]};-1!==d?(i[d].references++,i[d].updater(b)):i.push({identifier:u,updater:h(b,e),references:1}),o.push(u)}return o}function c(t){var e=document.createElement("style"),o=t.attributes||{};if(void 0===o.nonce){var a=r.nc;a&&(o.nonce=a)}if(Object.keys(o).forEach((function(t){e.setAttribute(t,o[t])})),"function"==typeof t.insert)t.insert(e);else{var i=n(t.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(e)}return e}var u,d=(u=[],function(t,e){return u[t]=e,u.filter(Boolean).join("\n")});function b(t,e,r,o){var a=r?"":o.media?"@media ".concat(o.media," {").concat(o.css,"}"):o.css;if(t.styleSheet)t.styleSheet.cssText=d(e,a);else{var n=document.createTextNode(a),i=t.childNodes;i[e]&&t.removeChild(i[e]),i.length?t.insertBefore(n,i[e]):t.appendChild(n)}}function p(t,e,r){var o=r.css,a=r.media,n=r.sourceMap;if(a?t.setAttribute("media",a):t.removeAttribute("media"),n&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(n))))," */")),t.styleSheet)t.styleSheet.cssText=o;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(o))}}var f=null,v=0;function h(t,e){var r,o,a;if(e.singleton){var n=v++;r=f||(f=c(e)),o=b.bind(null,r,n,!1),a=b.bind(null,r,n,!0)}else r=c(e),o=p.bind(null,r,e),a=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(r)};return o(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;o(t=e)}else a()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=a());var r=s(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var o=0;o<r.length;o++){var a=l(r[o]);i[a].references--}for(var n=s(t,e),c=0;c<r.length;c++){var u=l(r[c]);0===i[u].references&&(i[u].updater(),i.splice(u,1))}r=n}}}},22:function(t,e,r){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var r=function(t,e){var r=t[1]||"",o=t[3];if(!o)return r;if(e&&"function"==typeof btoa){var a=(i=o,l=btoa(unescape(encodeURIComponent(JSON.stringify(i)))),s="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(l),"/*# ".concat(s," */")),n=o.sources.map((function(t){return"/*# sourceURL=".concat(o.sourceRoot||"").concat(t," */")}));return[r].concat(n).concat([a]).join("\n")}var i,l,s;return[r].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(r,"}"):r})).join("")},e.i=function(t,r,o){"string"==typeof t&&(t=[[null,t,""]]);var a={};if(o)for(var n=0;n<this.length;n++){var i=this[n][0];null!=i&&(a[i]=!0)}for(var l=0;l<t.length;l++){var s=[].concat(t[l]);o&&a[s[0]]||(r&&(s[2]?s[2]="".concat(r," and ").concat(s[2]):s[2]=r),e.push(s))}},e}},23:function(t,e,r){switch(window.__kbnThemeTag__){case"v7dark":return r(24);case"v7light":return r(26);case"v8dark":return r(28);case"v8light":return r(30)}},24:function(t,e,r){var o=r(21),a=r(25);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[t.i,a,""]]);var n={insert:"head",singleton:!1};o(a,n);t.exports=a.locals||{}},25:function(t,e,r){(e=r(22)(!1)).push([t.i,".tbvChart{display:flex;flex-direction:column;flex:1 0 0;overflow:auto;scrollbar-color:rgba(152,162,179,0.5) rgba(0,0,0,0);scrollbar-width:thin}.tbvChart::-webkit-scrollbar{width:16px;height:16px}.tbvChart::-webkit-scrollbar-thumb{background-color:rgba(152,162,179,0.5);background-clip:content-box;border-radius:16px;border:6px solid rgba(0,0,0,0)}.tbvChart::-webkit-scrollbar-corner,.tbvChart::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.tbvChart .euiDataGrid--stickyFooter .euiDataGridFooter{display:flex}.tbvChart__split{padding:8px;margin-bottom:24px;display:flex;flex-direction:column;flex:1 0 0}.tbvChart__split>h3{text-align:center}.tbvChart__splitColumns{flex-direction:row;align-items:flex-start}.tbvChartCellContent{max-width:100%;overflow:hidden !important;text-overflow:ellipsis !important;white-space:nowrap !important;word-wrap:normal !important}\n",""]),t.exports=e},26:function(t,e,r){var o=r(21),a=r(27);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[t.i,a,""]]);var n={insert:"head",singleton:!1};o(a,n);t.exports=a.locals||{}},27:function(t,e,r){(e=r(22)(!1)).push([t.i,".tbvChart{display:flex;flex-direction:column;flex:1 0 0;overflow:auto;scrollbar-color:rgba(105,112,125,0.5) rgba(0,0,0,0);scrollbar-width:thin}.tbvChart::-webkit-scrollbar{width:16px;height:16px}.tbvChart::-webkit-scrollbar-thumb{background-color:rgba(105,112,125,0.5);background-clip:content-box;border-radius:16px;border:6px solid rgba(0,0,0,0)}.tbvChart::-webkit-scrollbar-corner,.tbvChart::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.tbvChart .euiDataGrid--stickyFooter .euiDataGridFooter{display:flex}.tbvChart__split{padding:8px;margin-bottom:24px;display:flex;flex-direction:column;flex:1 0 0}.tbvChart__split>h3{text-align:center}.tbvChart__splitColumns{flex-direction:row;align-items:flex-start}.tbvChartCellContent{max-width:100%;overflow:hidden !important;text-overflow:ellipsis !important;white-space:nowrap !important;word-wrap:normal !important}\n",""]),t.exports=e},28:function(t,e,r){var o=r(21),a=r(29);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[t.i,a,""]]);var n={insert:"head",singleton:!1};o(a,n);t.exports=a.locals||{}},29:function(t,e,r){(e=r(22)(!1)).push([t.i,".tbvChart{display:flex;flex-direction:column;flex:1 0 0;overflow:auto;scrollbar-color:rgba(152,162,179,0.5) rgba(0,0,0,0);scrollbar-width:thin}.tbvChart::-webkit-scrollbar{width:16px;height:16px}.tbvChart::-webkit-scrollbar-thumb{background-color:rgba(152,162,179,0.5);background-clip:content-box;border-radius:16px;border:6px solid rgba(0,0,0,0)}.tbvChart::-webkit-scrollbar-corner,.tbvChart::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.tbvChart .euiDataGrid--stickyFooter .euiDataGridFooter{display:flex}.tbvChart__split{padding:8px;margin-bottom:24px;display:flex;flex-direction:column;flex:1 0 0}.tbvChart__split>h3{text-align:center}.tbvChart__splitColumns{flex-direction:row;align-items:flex-start}.tbvChartCellContent{max-width:100%;overflow:hidden !important;text-overflow:ellipsis !important;white-space:nowrap !important;word-wrap:normal !important}\n",""]),t.exports=e},30:function(t,e,r){var o=r(21),a=r(31);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[t.i,a,""]]);var n={insert:"head",singleton:!1};o(a,n);t.exports=a.locals||{}},31:function(t,e,r){(e=r(22)(!1)).push([t.i,".tbvChart{display:flex;flex-direction:column;flex:1 0 0;overflow:auto;scrollbar-color:rgba(105,112,125,0.5) rgba(0,0,0,0);scrollbar-width:thin}.tbvChart::-webkit-scrollbar{width:16px;height:16px}.tbvChart::-webkit-scrollbar-thumb{background-color:rgba(105,112,125,0.5);background-clip:content-box;border-radius:16px;border:6px solid rgba(0,0,0,0)}.tbvChart::-webkit-scrollbar-corner,.tbvChart::-webkit-scrollbar-track{background-color:rgba(0,0,0,0)}.tbvChart .euiDataGrid--stickyFooter .euiDataGridFooter{display:flex}.tbvChart__split{padding:8px;margin-bottom:24px;display:flex;flex-direction:column;flex:1 0 0}.tbvChart__split>h3{text-align:center}.tbvChart__splitColumns{flex-direction:row;align-items:flex-start}.tbvChartCellContent{max-width:100%;overflow:hidden !important;text-overflow:ellipsis !important;white-space:nowrap !important;word-wrap:normal !important}\n",""]),t.exports=e},32:function(t,e,r){"use strict";r.r(e),r.d(e,"default",(function(){return g}));r(23);var o=r(1),a=r.n(o),n=r(18),i=r.n(n),l=r(16),s=r(10),c=r(0),u=r(3),d=r(7);var b=r(11),p=r(17),f=r(8),v=r(19),h=r(5);const m=Object(o.memo)((({dataGridAriaLabel:t,filename:e,columns:r,rows:a})=>{const[n,i]=Object(o.useState)(!1),u=Object(o.useCallback)((()=>i((t=>!t))),[]),b=Object(o.useCallback)((()=>i(!1)),[]),{services:{uiSettings:m}}=Object(l.useKibana)(),x=f.exporters.tableHasFormulas(r,a),C=Object(o.useCallback)((t=>{const o=m.get(v.CSV_SEPARATOR_SETTING),n=m.get(v.CSV_QUOTE_VALUES_SETTING),i=f.exporters.datatableToCSV({type:"datatable",columns:r,rows:a},{csvSeparator:o,quoteValues:n,formatFactory:Object(h.a)().deserialize,raw:!t,escapeFormulaValues:!1});Object(v.downloadFileAs)(`${e||"unsaved"}.csv`,{content:i,type:f.exporters.CSV_MIME_TYPE})}),[r,a,e,m]),g=c.i18n.translate("visTypeTable.vis.controls.exportButtonAriaLabel",{defaultMessage:"Export {dataGridAriaLabel} as CSV",values:{dataGridAriaLabel:t}}),w=Object(d.jsx)(s.EuiButtonEmpty,{"aria-label":g,size:"xs",iconType:"exportAction",color:"text",className:"euiDataGrid__controlBtn",onClick:u},Object(d.jsx)(p.FormattedMessage,{id:"visTypeTable.vis.controls.exportButtonLabel",defaultMessage:"Export"})),j=x?Object(d.jsx)(s.EuiToolTip,{position:"top",content:c.i18n.translate("visTypeTable.vis.controls.exportButtonFormulasWarning",{defaultMessage:"Your CSV contains characters that spreadsheet applications might interpret as formulas."})},w):w,y=[Object(d.jsx)(s.EuiContextMenuItem,{key:"rawCsv",onClick:()=>C(!1)},Object(d.jsx)(p.FormattedMessage,{id:"visTypeTable.vis.controls.rawCSVButtonLabel",defaultMessage:"Raw"})),Object(d.jsx)(s.EuiContextMenuItem,{key:"csv",onClick:()=>C(!0)},Object(d.jsx)(p.FormattedMessage,{id:"visTypeTable.vis.controls.formattedCSVButtonLabel",defaultMessage:"Formatted"}))];return Object(d.jsx)(s.EuiPopover,{id:"dataTableExportData",button:j,isOpen:n,closePopover:b,panelPaddingSize:"none",repositionOnScroll:!0},Object(d.jsx)(s.EuiContextMenuPanel,{className:"eui-textNoWrap",items:y}))})),x=Object(o.memo)((({fireEvent:t,table:e,visConfig:r,title:n,uiStateProps:{columnsWidth:i,sort:l,setColumnsWidth:p,setSort:f}})=>{const{columns:v,rows:h,formattedColumns:x}=e,C=Object(o.useMemo)((()=>{var t;return null!==l.columnIndex&&l.direction?Object(u.orderBy)(h,null===(t=v[l.columnIndex])||void 0===t?void 0:t.id,l.direction):h}),[v,h,l]),g=Object(o.useMemo)((()=>((t,e,r)=>({rowIndex:o,columnId:a})=>{const n=t[o][a],i=e[a].formatter.convert(n,"html");return Object(d.jsx)("div",{dangerouslySetInnerHTML:{__html:i},"data-test-subj":"tbvChartCellContent",className:r?"":"tbvChartCellContent"})})(C,x,r.autoFitRowToContent)),[x,C,r.autoFitRowToContent]),w=Object(o.useMemo)((()=>r.autoFitRowToContent?{defaultHeight:"auto"}:void 0),[r.autoFitRowToContent]),j=((t,e,r,o,a)=>{const n=(r,o)=>{a({name:"filterBucket",data:{data:[{table:{columns:t,rows:e},...r,column:r.column}],negate:o}})};return t.map(((t,a)=>{const i=r[t.id],l=i.filterable?[({rowIndex:t,columnId:r,Component:o,closePopover:l})=>{const s=e[t][r],u=null!=s,b=i.formatter.convert(s),p=c.i18n.translate("visTypeTable.tableCellFilter.filterForValueText",{defaultMessage:"Filter for value"}),f=c.i18n.translate("visTypeTable.tableCellFilter.filterForValueAriaLabel",{defaultMessage:"Filter for value: {cellContent}",values:{cellContent:b}});return u&&Object(d.jsx)(o,{"aria-label":f,"data-test-subj":"tbvChartCell__filterForCellValue",onClick:()=>{n({row:t,column:a,value:s},!1),l()},iconType:"plusInCircle"},p)},({rowIndex:t,columnId:r,Component:o,closePopover:l})=>{const s=e[t][r],u=null!=s,b=i.formatter.convert(s),p=c.i18n.translate("visTypeTable.tableCellFilter.filterOutValueText",{defaultMessage:"Filter out value"}),f=c.i18n.translate("visTypeTable.tableCellFilter.filterOutValueAriaLabel",{defaultMessage:"Filter out value: {cellContent}",values:{cellContent:b}});return u&&Object(d.jsx)(o,{"aria-label":f,onClick:()=>{n({row:t,column:a,value:s},!0),l()},iconType:"minusInCircle"},p)}]:void 0,s=o.find((t=>t.colIndex===a)),u={id:t.id,display:t.name,displayAsText:t.name,actions:{showHide:!1,showMoveLeft:!1,showMoveRight:!1,showSortAsc:{label:c.i18n.translate("visTypeTable.sort.ascLabel",{defaultMessage:"Sort asc"})},showSortDesc:{label:c.i18n.translate("visTypeTable.sort.descLabel",{defaultMessage:"Sort desc"})}},cellActions:l};return s&&(u.initialWidth=s.width),u}))})(v,C,x,i,t),y=Object(b.b)(r,h.length),T=Object(o.useMemo)((()=>{var t;return null!==l.columnIndex&&l.direction?[{id:null===(t=v[l.columnIndex])||void 0===t?void 0:t.id,direction:l.direction}]:[]}),[v,l]),_=Object(o.useCallback)((t=>{const e=t.length<=1?t[0]:t[1];f(e&&{columnIndex:v.findIndex((t=>t.id===e.id)),direction:e.direction})}),[v,f]),O=n||r.title||c.i18n.translate("visTypeTable.defaultAriaLabel",{defaultMessage:"Data table visualization"}),k=Object(o.useCallback)((({columnId:t,width:e})=>{const r=v.findIndex((e=>e.id===t));p({colIndex:r,width:e})}),[v,p]);return Object(d.jsx)(a.a.Fragment,null,n&&Object(d.jsx)(s.EuiTitle,{size:"xs"},Object(d.jsx)("h3",null,n)),Object(d.jsx)(s.EuiDataGrid,{"aria-label":O,columns:j,gridStyle:{border:"horizontal",header:"underline"},rowHeightsOptions:w,rowCount:h.length,columnVisibility:{visibleColumns:v.map((({id:t})=>t)),setVisibleColumns:()=>{}},toolbarVisibility:r.showToolbar&&{showColumnSelector:!1,showFullScreenSelector:!1,showSortSelector:!1,showStyleSelector:!1,additionalControls:Object(d.jsx)(m,{dataGridAriaLabel:O,columns:v,rows:C,filename:r.title})},renderCellValue:g,renderFooterCellValue:r.showTotal?({columnId:t})=>x[t].formattedTotal||null:void 0,pagination:y,sorting:{columns:T,onSort:_},onColumnResize:k,minSizeForControls:1}))})),C=Object(o.memo)((({fireEvent:t,tables:e,visConfig:r,uiStateProps:o})=>Object(d.jsx)(a.a.Fragment,null,e.map((({table:e,title:a})=>Object(d.jsx)("div",{key:a,className:"tbvChart__split"},Object(d.jsx)(x,{fireEvent:t,table:e,visConfig:r,title:a,uiStateProps:o}))))))),g=({core:t,handlers:e,visData:{direction:r,table:a,tables:n},visConfig:s})=>{Object(o.useEffect)((()=>{e.done()}),[e]);const c=Object(b.c)(e.uiState),u=i()("tbvChart",{tbvChart__splitColumns:"column"===r});return Object(d.jsx)(t.i18n.Context,null,Object(d.jsx)(l.KibanaContextProvider,{services:t},Object(d.jsx)("div",{className:u,"data-test-subj":"tbvChart"},a?Object(d.jsx)(x,{fireEvent:e.event,table:a,visConfig:s,uiStateProps:c}):Object(d.jsx)(C,{fireEvent:e.event,tables:n,visConfig:s,uiStateProps:c}))))}}}]);