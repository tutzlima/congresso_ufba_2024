(window.data_bundle_jsonpfunction=window.data_bundle_jsonpfunction||[]).push([[1],{108:function(e,t,a){"use strict";a.r(t),a.d(t,"FILTER_EDITOR_WIDTH",(function(){return C})),a.d(t,"FilterItem",(function(){return O}));var r=a(13),s=a(5),i=a(107),l=a.n(i),n=a(4),o=a.n(n),d=a(117),u=a(50),c=a.n(u),p=a(0),f=a(68);const g=({filter:e,iconOnClick:t,onClick:a,valueLabel:i,errorMessage:l,filterLabelStatus:n,...d})=>{const[u,g]=Object(r.useInnerText)();let h=l||p.i18n.translate("data.filter.filterBar.moreFilterActionsMessage",{defaultMessage:"Filter: {innerText}. Select for more filter actions.",values:{innerText:g}});return Object(s.A)(e)&&(h=`${p.i18n.translate("data.filter.filterBar.pinnedFilterPrefix",{defaultMessage:"Pinned"})} ${h}`),e.meta.disabled&&(h=`${p.i18n.translate("data.filter.filterBar.disabledFilterPrefix",{defaultMessage:"Disabled"})} ${h}`),o.a.createElement(r.EuiBadge,c()({title:h,color:"hollow",iconType:"cross",iconSide:"right",closeButtonProps:{tabIndex:-1},iconOnClick:t,iconOnClickAriaLabel:p.i18n.translate("data.filter.filterBar.filterItemBadgeIconAriaLabel",{defaultMessage:"Delete {filter}",values:{filter:g}}),onClick:a,onClickAriaLabel:p.i18n.translate("data.filter.filterBar.filterItemBadgeAriaLabel",{defaultMessage:"Filter actions"})},d),o.a.createElement("span",{ref:u},o.a.createElement(f.b,{filter:e,valueLabel:i,filterLabelStatus:n})))};var h=a(20),m=a(22);const b="warn",E="error",C=800;function O(e){var t;const[a,i]=Object(n.useState)(!1),[u,c]=Object(n.useState)(void 0),{id:p,filter:f,indexPatterns:O,hiddenPanelOptions:S}=e;function v(t){i(!1),e.onUpdate(t)}function F(){const t=Object(s.Q)(f);e.onUpdate(t)}function y(e){const{disabled:t}=f.meta;return t||e.status===E}if(Object(n.useEffect)((()=>{const t=e.filter.meta.index;let a=!0;return t?Object(m.a)().get(t).then((e=>{a&&c(!!e)})).catch((()=>{a&&c(!1)})):a&&c(!0),()=>{a=!1}}),[e.filter.meta.index]),void 0===u)return null;const x=function(){var t;const a={title:"",message:"",status:""};if(null!==(t=f.meta)&&void 0!==t&&t.isMultiIndex)return a;if(!1===u)a.status=E,a.title=e.intl.formatMessage({id:"data.filter.filterBar.labelErrorText",defaultMessage:"Error"}),a.message=e.intl.formatMessage({id:"data.filter.filterBar.labelErrorInfo",defaultMessage:"Index pattern {indexPattern} not found"},{indexPattern:f.meta.index});else if(e.indexPatterns.length&&!Object(h.n)(f,O)&&!O.map((e=>e.fields.map((e=>e.name)))).reduce(((e,t)=>[...e,...t]),[]).includes((null===(r=f.meta)||void 0===r?void 0:r.key)||""))a.status=b,a.title=e.intl.formatMessage({id:"data.filter.filterBar.labelWarningText",defaultMessage:"Warning"}),a.message=e.intl.formatMessage({id:"data.filter.filterBar.labelWarningInfo",defaultMessage:"Field {fieldName} does not exist in current view"},{fieldName:f.meta.key});else try{a.title=Object(h.m)(f,O)}catch(t){a.status=E,a.title=e.intl.formatMessage({id:"data.filter.filterBar.labelErrorText",defaultMessage:"Error"}),a.message=t.message}var r;return a}();if(x.status===E&&!f.meta.disabled)return f.meta.disabled=!0,e.onUpdate(f),null;const I=o.a.createElement(g,{filter:f,valueLabel:x.title,filterLabelStatus:x.status,errorMessage:x.message,className:(M=null!==(t=f.meta.negate)&&void 0!==t&&t,L=x,l()("globalFilterItem",{"globalFilterItem-isDisabled":y(L),"globalFilterItem-isError":L.status===E,"globalFilterItem-isWarning":L.status===b,"globalFilterItem-isPinned":Object(s.A)(f),"globalFilterItem-isExcluded":M},e.className)),iconOnClick:()=>e.onRemove(),onClick:function(e){e.shiftKey?F():i(!a)},"data-test-subj":function(e){const t=f.meta.key?`filter-key-${f.meta.key}`:"",a=f.meta.value?`filter-value-${function(e){return""===e.status}(e)?e.title:e.status}`:"",r=f.meta.negate?"filter-negated":"",i="filter-"+(y(e)?"disabled":"enabled"),n="filter-"+(Object(s.A)(f)?"pinned":"unpinned");return l()("filter",i,t,a,n,r)}(x)});var M,L;return o.a.createElement(r.EuiPopover,{id:`popoverFor_filter${p}`,className:"globalFilterItem__popover",anchorClassName:"globalFilterItem__popoverAnchor",isOpen:a,closePopover:()=>{i(!1)},button:I,anchorPosition:"downLeft",panelPaddingSize:"none"},o.a.createElement(r.EuiContextMenu,{initialPanelId:0,panels:function(){const{negate:t,disabled:a}=f.meta;let r=[{name:Object(s.A)(f)?e.intl.formatMessage({id:"data.filter.filterBar.unpinFilterButtonLabel",defaultMessage:"Unpin"}):e.intl.formatMessage({id:"data.filter.filterBar.pinFilterButtonLabel",defaultMessage:"Pin across all apps"}),icon:"pin",onClick:()=>{i(!1),function(){const t=Object(s.S)(f);e.onUpdate(t)}()},"data-test-subj":"pinFilter"},{name:e.intl.formatMessage({id:"data.filter.filterBar.editFilterButtonLabel",defaultMessage:"Edit filter"}),icon:"pencil",panel:1,"data-test-subj":"editFilter"},{name:t?e.intl.formatMessage({id:"data.filter.filterBar.includeFilterButtonLabel",defaultMessage:"Include results"}):e.intl.formatMessage({id:"data.filter.filterBar.excludeFilterButtonLabel",defaultMessage:"Exclude results"}),icon:t?"plusInCircle":"minusInCircle",onClick:()=>{i(!1),function(){const t=Object(s.R)(f);e.onUpdate(t)}()},"data-test-subj":"negateFilter"},{name:a?e.intl.formatMessage({id:"data.filter.filterBar.enableFilterButtonLabel",defaultMessage:"Re-enable"}):e.intl.formatMessage({id:"data.filter.filterBar.disableFilterButtonLabel",defaultMessage:"Temporarily disable"}),icon:""+(a?"eye":"eyeClosed"),onClick:()=>{i(!1),F()},"data-test-subj":"disableFilter"},{name:e.intl.formatMessage({id:"data.filter.filterBar.deleteFilterButtonLabel",defaultMessage:"Delete"}),icon:"trash",onClick:()=>{i(!1),e.onRemove()},"data-test-subj":"deleteFilter"}];return S&&S.length>0&&(r=r.filter((e=>!S.includes(e["data-test-subj"])))),[{id:0,items:r},{id:1,width:C,content:o.a.createElement("div",null,o.a.createElement(d.a,{filter:f,indexPatterns:O,onSubmit:v,onCancel:()=>{i(!1)},timeRangeForSuggestionsOverride:e.timeRangeForSuggestionsOverride}))}]}()}))}t.default=O},116:function(e,t,a){"use strict";a.d(t,"c",(function(){return n})),a.d(t,"b",(function(){return c})),a.d(t,"a",(function(){return f}));var r=a(0),s=a(5);const i={message:r.i18n.translate("data.filter.filterEditor.isOperatorOptionLabel",{defaultMessage:"is"}),type:s.b.PHRASE,negate:!1},l={message:r.i18n.translate("data.filter.filterEditor.isNotOperatorOptionLabel",{defaultMessage:"is not"}),type:s.b.PHRASE,negate:!0},n={message:r.i18n.translate("data.filter.filterEditor.isOneOfOperatorOptionLabel",{defaultMessage:"is one of"}),type:s.b.PHRASES,negate:!1,fieldTypes:["string","number","date","ip","geo_point","geo_shape"]},o={message:r.i18n.translate("data.filter.filterEditor.isNotOneOfOperatorOptionLabel",{defaultMessage:"is not one of"}),type:s.b.PHRASES,negate:!0,fieldTypes:["string","number","date","ip","geo_point","geo_shape"]},d={message:r.i18n.translate("data.filter.filterEditor.isBetweenOperatorOptionLabel",{defaultMessage:"is between"}),type:s.b.RANGE,negate:!1,fieldTypes:["number","number_range","date","date_range","ip","ip_range"]},u={message:r.i18n.translate("data.filter.filterEditor.isNotBetweenOperatorOptionLabel",{defaultMessage:"is not between"}),type:s.b.RANGE,negate:!0,fieldTypes:["number","number_range","date","date_range","ip","ip_range"]},c={message:r.i18n.translate("data.filter.filterEditor.existsOperatorOptionLabel",{defaultMessage:"exists"}),type:s.b.EXISTS,negate:!1},p={message:r.i18n.translate("data.filter.filterEditor.doesNotExistOperatorOptionLabel",{defaultMessage:"does not exist"}),type:s.b.EXISTS,negate:!0},f=[i,l,n,o,d,u,c,p]},117:function(e,t,a){"use strict";a.d(t,"a",(function(){return W}));var r=a(3),s=a.n(r),i=a(13),l=a(0),n=a(16),o=a(5),d=a(1),u=a(4),c=a.n(u),p=a(110),f=a(50),g=a.n(f);function h(e){const{options:t,selectedOptions:a,getLabel:r,onChange:s,...l}=e,n=t.map(r),o=n.map((e=>({label:e}))),d=a.filter((e=>-1!==t.indexOf(e))).map((e=>o[t.indexOf(e)]));return c.a.createElement(i.EuiComboBox,g()({options:o,selectedOptions:d,onChange:e=>{const a=e.map((({label:e})=>t[n.indexOf(e)]));s(a)},sortMatchesBy:"startsWith"},l))}var m=a(19),b=a.n(m),E=a(116),C=a(2);function O(e,t){switch(t){case"date":const t="string"==typeof e?b.a.parse(e):null;return Boolean("string"==typeof e&&t&&t.isValid());case"ip":try{return Boolean(new C.IpAddress(e))}catch(e){return!1}default:return!0}}var S=a(28);class phrase_suggestor_PhraseSuggestorUI extends c.a.Component{constructor(...e){super(...e),s()(this,"services",this.props.kibana.services),s()(this,"abortController",void 0),s()(this,"state",{suggestions:[],isLoading:!1}),s()(this,"onSearchChange",(e=>{this.updateSuggestions(`${e}`)})),s()(this,"updateSuggestions",Object(d.debounce)((async(e="")=>{this.abortController&&this.abortController.abort(),this.abortController=new AbortController;const{indexPattern:t,field:a,timeRangeForSuggestionsOverride:r}=this.props;if(!a||!this.isSuggestingValues())return;this.setState({isLoading:!0});const s=await this.services.data.autocomplete.getValueSuggestions({indexPattern:t,field:a,query:e,signal:this.abortController.signal,useTimeRange:r});this.setState({suggestions:s,isLoading:!1})}),500))}componentDidMount(){this.updateSuggestions()}componentWillUnmount(){this.abortController&&this.abortController.abort()}isSuggestingValues(){const e=this.services.uiSettings.get(C.UI_SETTINGS.FILTERS_EDITOR_SUGGEST_VALUES),{field:t}=this.props;return e&&t&&t.aggregatable&&"string"===t.type}}Object(S.withKibana)(phrase_suggestor_PhraseSuggestorUI);class value_input_type_ValueInputTypeUI extends u.Component{constructor(...e){super(...e),s()(this,"onBoolChange",(e=>{const t="true"===e.target.value;this.props.onChange(t)})),s()(this,"onChange",(e=>{const t=e.target.value;this.props.onChange(t)})),s()(this,"onBlur",(e=>{if(this.props.onBlur){const t=e.target.value;this.props.onBlur(t)}}))}render(){const e=this.props.value;let t;switch(this.props.type){case"string":t=c.a.createElement(i.EuiFieldText,{fullWidth:this.props.fullWidth,placeholder:this.props.placeholder,value:e,onChange:this.onChange,controlOnly:this.props.controlOnly,className:this.props.className});break;case"number":case"number_range":t=c.a.createElement(i.EuiFieldNumber,{fullWidth:this.props.fullWidth,placeholder:this.props.placeholder,value:"string"==typeof e?parseFloat(e):e,onChange:this.onChange,controlOnly:this.props.controlOnly,className:this.props.className});break;case"date":case"date_range":t=c.a.createElement(i.EuiFieldText,{fullWidth:this.props.fullWidth,placeholder:this.props.placeholder,value:e,onChange:this.onChange,onBlur:this.onBlur,isInvalid:!Object(d.isEmpty)(e)&&!O(e,this.props.type),controlOnly:this.props.controlOnly,className:this.props.className});break;case"ip":case"ip_range":t=c.a.createElement(i.EuiFieldText,{fullWidth:this.props.fullWidth,placeholder:this.props.placeholder,value:e,onChange:this.onChange,isInvalid:!Object(d.isEmpty)(e)&&!O(e,this.props.type),controlOnly:this.props.controlOnly,className:this.props.className});break;case"boolean":t=c.a.createElement(i.EuiSelect,{options:[{value:void 0,text:this.props.placeholder},{value:"true",text:this.props.intl.formatMessage({id:"data.filter.filterEditor.trueOptionLabel",defaultMessage:"true"})},{value:"false",text:this.props.intl.formatMessage({id:"data.filter.filterEditor.falseOptionLabel",defaultMessage:"false"})}],value:e,onChange:this.onBoolChange,className:this.props.className,fullWidth:this.props.fullWidth})}return t}}const v=Object(n.injectI18n)(value_input_type_ValueInputTypeUI);function F(e){return h(e)}const y=Object(n.injectI18n)(Object(S.withKibana)(class phrase_value_input_PhraseValueInputUI extends phrase_suggestor_PhraseSuggestorUI{render(){return c.a.createElement(i.EuiFormRow,{fullWidth:this.props.fullWidth,label:this.props.intl.formatMessage({id:"data.filter.filterEditor.valueInputLabel",defaultMessage:"Value"})},this.isSuggestingValues()?this.renderWithSuggestions():c.a.createElement(v,{fullWidth:this.props.fullWidth,placeholder:this.props.intl.formatMessage({id:"data.filter.filterEditor.valueInputPlaceholder",defaultMessage:"Enter a value"}),value:this.props.value,onChange:this.props.onChange,type:this.props.field?this.props.field.type:"string"}))}renderWithSuggestions(){const{suggestions:e}=this.state,{value:t,intl:a,onChange:r,fullWidth:s}=this.props,i=String(t),l=t?Object(d.uniq)([i,...e]):e;return c.a.createElement(F,{fullWidth:s,placeholder:a.formatMessage({id:"data.filter.filterEditor.valueSelectPlaceholder",defaultMessage:"Select a value"}),options:l,getLabel:e=>e,selectedOptions:t?[i]:[],onChange:([e=""])=>r(e),onSearchChange:this.onSearchChange,singleSelection:{asPlainText:!0},onCreateOption:r,isClearable:!1,"data-test-subj":"filterParamsComboBox phraseParamsComboxBox"})}}));function x(e){return h(e)}const I=Object(n.injectI18n)(Object(S.withKibana)(class phrases_values_input_PhrasesValuesInputUI extends phrase_suggestor_PhraseSuggestorUI{render(){const{suggestions:e}=this.state,{values:t,intl:a,onChange:r,fullWidth:s}=this.props,l=t?Object(d.uniq)([...t,...e]):e;return c.a.createElement(i.EuiFormRow,{fullWidth:s,label:a.formatMessage({id:"data.filter.filterEditor.valuesSelectLabel",defaultMessage:"Values"})},c.a.createElement(x,{fullWidth:s,placeholder:a.formatMessage({id:"data.filter.filterEditor.valuesSelectPlaceholder",defaultMessage:"Select values"}),options:l,getLabel:e=>e,selectedOptions:t||[],onSearchChange:this.onSearchChange,onCreateOption:e=>r([...t||[],e]),onChange:r,isClearable:!1,"data-test-subj":"filterParamsComboBox phrasesParamsComboxBox"}))}}));var M=a(6),L=a.n(M);const P=Object(n.injectI18n)((function(e){const t=Object(S.useKibana)(),a=e.field?e.field.type:"string",r=t.services.uiSettings.get("dateFormat:tz"),s=e=>{if("string"!=typeof e&&"number"!=typeof e)return e;const t=L()(e).tz(r);return t.isValid()?null==t?void 0:t.format("YYYY-MM-DDTHH:mm:ss.SSSZ"):e},l=t=>{if("string"!=typeof t&&"number"!=typeof t)throw new Error("Range params must be a string or number");e.onChange({from:t,to:Object(d.get)(e,"value.to")})},n=t=>{if("string"!=typeof t&&"number"!=typeof t)throw new Error("Range params must be a string or number");e.onChange({from:Object(d.get)(e,"value.from"),to:t})};return c.a.createElement("div",null,c.a.createElement(i.EuiFormControlLayoutDelimited,{fullWidth:e.fullWidth,"aria-label":e.intl.formatMessage({id:"data.filter.filterEditor.rangeInputLabel",defaultMessage:"Range"}),startControl:c.a.createElement(v,{controlOnly:!0,type:a,value:e.value?e.value.from:void 0,onChange:l,onBlur:e=>{l(s(e))},placeholder:e.intl.formatMessage({id:"data.filter.filterEditor.rangeStartInputPlaceholder",defaultMessage:"Start of the range"})}),endControl:c.a.createElement(v,{controlOnly:!0,type:a,value:e.value?e.value.to:void 0,onChange:n,onBlur:e=>{n(s(e))},placeholder:e.intl.formatMessage({id:"data.filter.filterEditor.rangeEndInputPlaceholder",defaultMessage:"End of the range"})})}))}));var j=a(20);class filter_editor_FilterEditorUI extends u.Component{constructor(e){super(e),s()(this,"toggleCustomEditor",(()=>{const e=!this.state.isCustomEditorOpen;this.setState({isCustomEditorOpen:e})})),s()(this,"onIndexPatternChange",(([e])=>{this.setState({selectedIndexPattern:e,selectedField:undefined,selectedOperator:undefined,params:undefined})})),s()(this,"onFieldChange",(([e])=>{this.setState({selectedField:e,selectedOperator:undefined,params:undefined})})),s()(this,"onOperatorChange",(([e])=>{const t=Object(d.get)(this.state.selectedOperator,"type")===Object(d.get)(e,"type")?this.state.params:void 0;this.setState({selectedOperator:e,params:t})})),s()(this,"onCustomLabelSwitchChange",(e=>{const t=e.target.checked,a=e.target.checked?"":null;this.setState({useCustomLabel:t,customLabel:a})})),s()(this,"onCustomLabelChange",(e=>{const t=e.target.value;this.setState({customLabel:t})})),s()(this,"onParamsChange",(e=>{this.setState({params:e})})),s()(this,"onQueryDslChange",(e=>{this.setState({queryDsl:e})})),s()(this,"onSubmit",(()=>{const{selectedIndexPattern:e,selectedField:t,selectedOperator:a,params:r,useCustomLabel:s,customLabel:i,isCustomEditorOpen:l,queryDsl:n}=this.state,{$state:d}=this.props.filter;if(!d||!d.store)return;const u=s?i:null;if(l){const{index:e,disabled:t=!1,negate:a=!1}=this.props.filter.meta,r=e||this.props.indexPatterns[0].id,s=JSON.parse(n),i=Object(o.d)(r,s,t,a,u,d.store);this.props.onSubmit(i)}else if(e&&t&&a){var c;const s=Object(o.h)(e,t,a.type,a.negate,null!==(c=this.props.filter.meta.disabled)&&void 0!==c&&c,null!=r?r:"",u,d.store);this.props.onSubmit(s)}})),this.state={selectedIndexPattern:this.getIndexPatternFromFilter(),selectedField:this.getFieldFromFilter(),selectedOperator:this.getSelectedOperator(),params:Object(o.u)(e.filter),useCustomLabel:null!==e.filter.meta.alias,customLabel:e.filter.meta.alias||"",queryDsl:JSON.stringify(Object(o.n)(e.filter),null,2),isCustomEditorOpen:this.isUnknownFilterType()}}render(){return c.a.createElement("div",null,c.a.createElement(i.EuiPopoverTitle,{paddingSize:"m"},c.a.createElement(i.EuiFlexGroup,{alignItems:"baseline",responsive:!1},c.a.createElement(i.EuiFlexItem,null,c.a.createElement(n.FormattedMessage,{id:"data.filter.filterEditor.editFilterPopupTitle",defaultMessage:"Edit filter"})),c.a.createElement(i.EuiFlexItem,{grow:!1,className:"filterEditor__hiddenItem"}),c.a.createElement(i.EuiFlexItem,{grow:!1},c.a.createElement(i.EuiButtonEmpty,{size:"xs","data-test-subj":"editQueryDSL",onClick:this.toggleCustomEditor},this.state.isCustomEditorOpen?c.a.createElement(n.FormattedMessage,{id:"data.filter.filterEditor.editFilterValuesButtonLabel",defaultMessage:"Edit filter values"}):c.a.createElement(n.FormattedMessage,{id:"data.filter.filterEditor.editQueryDslButtonLabel",defaultMessage:"Edit as Query DSL"}))))),c.a.createElement("div",{className:"globalFilterItem__editorForm"},c.a.createElement(i.EuiForm,null,this.renderIndexPatternInput(),this.state.isCustomEditorOpen?this.renderCustomEditor():this.renderRegularEditor(),c.a.createElement(i.EuiSpacer,{size:"m"}),c.a.createElement(i.EuiSwitch,{id:"filterEditorCustomLabelSwitch","data-test-subj":"createCustomLabel",label:this.props.intl.formatMessage({id:"data.filter.filterEditor.createCustomLabelSwitchLabel",defaultMessage:"Create custom label?"}),checked:this.state.useCustomLabel,onChange:this.onCustomLabelSwitchChange}),this.state.useCustomLabel&&c.a.createElement("div",null,c.a.createElement(i.EuiSpacer,{size:"m"}),c.a.createElement(i.EuiFormRow,{label:this.props.intl.formatMessage({id:"data.filter.filterEditor.createCustomLabelInputLabel",defaultMessage:"Custom label"}),fullWidth:!0},c.a.createElement(i.EuiFieldText,{value:`${this.state.customLabel}`,onChange:this.onCustomLabelChange,fullWidth:!0}))),c.a.createElement(i.EuiSpacer,{size:"m"}),c.a.createElement(i.EuiFlexGroup,{direction:"rowReverse",alignItems:"center",responsive:!1},c.a.createElement(i.EuiFlexItem,{grow:!1},c.a.createElement(i.EuiButton,{fill:!0,onClick:this.onSubmit,isDisabled:!this.isFilterValid(),"data-test-subj":"saveFilter"},c.a.createElement(n.FormattedMessage,{id:"data.filter.filterEditor.saveButtonLabel",defaultMessage:"Save"}))),c.a.createElement(i.EuiFlexItem,{grow:!1},c.a.createElement(i.EuiButtonEmpty,{flush:"right",onClick:this.props.onCancel,"data-test-subj":"cancelSaveFilter"},c.a.createElement(n.FormattedMessage,{id:"data.filter.filterEditor.cancelButtonLabel",defaultMessage:"Cancel"}))),c.a.createElement(i.EuiFlexItem,null)))))}renderIndexPatternInput(){if(this.props.indexPatterns.length<=1&&this.props.indexPatterns.find((e=>e===this.getIndexPatternFromFilter())))return"";const{selectedIndexPattern:e}=this.state;return c.a.createElement(i.EuiFlexGroup,null,c.a.createElement(i.EuiFlexItem,null,c.a.createElement(i.EuiFormRow,{fullWidth:!0,label:this.props.intl.formatMessage({id:"data.filter.filterEditor.indexPatternSelectLabel",defaultMessage:"Index Pattern"})},c.a.createElement(B,{fullWidth:!0,placeholder:this.props.intl.formatMessage({id:"data.filter.filterBar.indexPatternSelectPlaceholder",defaultMessage:"Select an index pattern"}),options:this.props.indexPatterns,selectedOptions:e?[e]:[],getLabel:e=>e.title,onChange:this.onIndexPatternChange,singleSelection:{asPlainText:!0},isClearable:!1,"data-test-subj":"filterIndexPatternsSelect"}))))}renderRegularEditor(){return c.a.createElement("div",null,c.a.createElement(i.EuiFlexGroup,{responsive:!0,gutterSize:"s"},c.a.createElement(i.EuiFlexItem,{grow:2},this.renderFieldInput()),c.a.createElement(i.EuiFlexItem,{grow:!1,style:{flexBasis:160}},this.renderOperatorInput())),c.a.createElement(i.EuiSpacer,{size:"s"}),c.a.createElement("div",{"data-test-subj":"filterParams"},this.renderParamsEditor()))}renderFieldInput(){const{selectedIndexPattern:e,selectedField:t}=this.state,a=e?e.fields.filter(C.isFilterable):[];return c.a.createElement(i.EuiFormRow,{fullWidth:!0,label:this.props.intl.formatMessage({id:"data.filter.filterEditor.fieldSelectLabel",defaultMessage:"Field"})},c.a.createElement(_,{fullWidth:!0,id:"fieldInput",isDisabled:!e,placeholder:this.props.intl.formatMessage({id:"data.filter.filterEditor.fieldSelectPlaceholder",defaultMessage:"Select a field first"}),options:a,selectedOptions:t?[t]:[],getLabel:e=>e.name,onChange:this.onFieldChange,singleSelection:{asPlainText:!0},isClearable:!1,"data-test-subj":"filterFieldSuggestionList"}))}renderOperatorInput(){const{selectedField:e,selectedOperator:t}=this.state,a=e?(r=e,E.a.filter((e=>!e.fieldTypes||e.fieldTypes.includes(r.type)))):[];var r;return c.a.createElement(i.EuiFormRow,{fullWidth:!0,label:this.props.intl.formatMessage({id:"data.filter.filterEditor.operatorSelectLabel",defaultMessage:"Operator"})},c.a.createElement(w,{fullWidth:!0,isDisabled:!e,placeholder:e?this.props.intl.formatMessage({id:"data.filter.filterEditor.operatorSelectPlaceholderSelect",defaultMessage:"Select"}):this.props.intl.formatMessage({id:"data.filter.filterEditor.operatorSelectPlaceholderWaiting",defaultMessage:"Waiting"}),options:a,selectedOptions:t?[t]:[],getLabel:({message:e})=>e,onChange:this.onOperatorChange,singleSelection:{asPlainText:!0},isClearable:!1,"data-test-subj":"filterOperatorList"}))}renderCustomEditor(){return c.a.createElement(i.EuiFormRow,{fullWidth:!0,label:l.i18n.translate("data.filter.filterEditor.queryDslLabel",{defaultMessage:"Elasticsearch Query DSL"})},c.a.createElement(S.CodeEditor,{languageId:p.XJsonLang.ID,width:"100%",height:"250px",value:this.state.queryDsl,onChange:this.onQueryDslChange,"data-test-subj":"customEditorInput","aria-label":l.i18n.translate("data.filter.filterEditor.queryDslAriaLabel",{defaultMessage:"Elasticsearch Query DSL editor"})}))}renderParamsEditor(){const e=this.state.selectedIndexPattern;if(!e||!this.state.selectedOperator)return"";switch(this.state.selectedOperator.type){case"exists":return"";case"phrase":return c.a.createElement(y,{indexPattern:e,field:this.state.selectedField,value:this.state.params,onChange:this.onParamsChange,"data-test-subj":"phraseValueInput",timeRangeForSuggestionsOverride:this.props.timeRangeForSuggestionsOverride,fullWidth:!0});case"phrases":return c.a.createElement(I,{indexPattern:e,field:this.state.selectedField,values:this.state.params,onChange:this.onParamsChange,timeRangeForSuggestionsOverride:this.props.timeRangeForSuggestionsOverride,fullWidth:!0});case"range":return c.a.createElement(P,{field:this.state.selectedField,value:this.state.params,onChange:this.onParamsChange,fullWidth:!0})}}isUnknownFilterType(){const{type:e}=this.props.filter.meta;return!!e&&!["phrase","phrases","range","exists"].includes(e)}getIndexPatternFromFilter(){return Object(j.n)(this.props.filter,this.props.indexPatterns)}getFieldFromFilter(){const e=this.getIndexPatternFromFilter();return e&&function(e,t){return t.fields.find((t=>t.name===e.meta.key))}(this.props.filter,e)}getSelectedOperator(){return e=this.props.filter,E.a.find((t=>e.meta.type===t.type&&e.meta.negate===t.negate));var e}isFilterValid(){const{isCustomEditorOpen:e,queryDsl:t,selectedIndexPattern:a,selectedField:r,selectedOperator:s,params:i}=this.state;if(e)try{const e=JSON.parse(t);return Object.keys(e).length>0}catch(e){return!1}return function(e,t,a,r){if(!e||!t||!a)return!1;switch(a.type){case"phrase":return O(r,t.type);case"phrases":return!(!Array.isArray(r)||!r.length)&&r.every((e=>O(e,t.type)));case"range":return"object"==typeof r&&(!r.from||O(r.from,t.type))&&(!r.to||O(r.to,t.type));case"exists":return!0;default:throw new Error(`Unknown operator type: ${a.type}`)}}(a,r,s,i)}}function B(e){return h(e)}function _(e){return h(e)}function w(e){return h(e)}const W=Object(n.injectI18n)(filter_editor_FilterEditorUI)}}]);