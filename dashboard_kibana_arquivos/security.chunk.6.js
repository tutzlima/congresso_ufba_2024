/*! Copyright Elasticsearch B.V. and/or licensed to Elasticsearch B.V. under one or more contributor license agreements. 
 * Licensed under the Elastic License 2.0; you may not use this file except in compliance with the Elastic License 2.0. */
(window.security_bundle_jsonpfunction=window.security_bundle_jsonpfunction||[]).push([[6],{107:function(e,t,n){e.exports=n(23)(1075)},108:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.now=t.removeTooOldValues=t.ObliviousSet=void 0;var r=function(){function e(e){this.ttl=e,this.set=new Set,this.timeMap=new Map}return e.prototype.has=function(e){return this.set.has(e)},e.prototype.add=function(e){var t=this;this.timeMap.set(e,i()),this.set.add(e),setTimeout((function(){o(t)}),0)},e.prototype.clear=function(){this.set.clear(),this.timeMap.clear()},e}();function o(e){for(var t=i()-e.ttl,n=e.set[Symbol.iterator]();;){var r=n.next().value;if(!r)return;if(!(e.timeMap.get(r)<t))return;e.timeMap.delete(r),e.set.delete(r)}}function i(){return(new Date).getTime()}t.ObliviousSet=r,t.removeTooOldValues=o,t.now=i},282:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BroadcastChannel",{enumerable:!0,get:function(){return r.BroadcastChannel}}),Object.defineProperty(t,"OPEN_BROADCAST_CHANNELS",{enumerable:!0,get:function(){return r.OPEN_BROADCAST_CHANNELS}}),Object.defineProperty(t,"beLeader",{enumerable:!0,get:function(){return o.beLeader}}),Object.defineProperty(t,"clearNodeFolder",{enumerable:!0,get:function(){return r.clearNodeFolder}}),Object.defineProperty(t,"createLeaderElection",{enumerable:!0,get:function(){return o.createLeaderElection}}),Object.defineProperty(t,"enforceOptions",{enumerable:!0,get:function(){return r.enforceOptions}});var r=n(283),o=n(290)},283:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OPEN_BROADCAST_CHANNELS=t.BroadcastChannel=void 0,t.clearNodeFolder=function(e){e=(0,i.fillOptionsWithDefaults)(e);var t=(0,o.chooseMethod)(e);return"node"===t.type?t.clearNodeFolder().then((function(){return!0})):r.PROMISE_RESOLVED_FALSE},t.enforceOptions=function(e){s=e};var r=n(64),o=n(284),i=n(94),a=new Set;t.OPEN_BROADCAST_CHANNELS=a;var s,u=0,c=function(e,t){var n,c;this.id=u++,a.add(this),this.name=e,s&&(t=s),this.options=(0,i.fillOptionsWithDefaults)(t),this.method=(0,o.chooseMethod)(this.options),this._iL=!1,this._onML=null,this._addEL={message:[],internal:[]},this._uMP=new Set,this._befC=[],this._prepP=null,c=(n=this).method.create(n.name,n.options),(0,r.isPromise)(c)?(n._prepP=c,c.then((function(e){n._state=e}))):n._state=c};function d(e,t,n){var o={time:e.method.microSeconds(),type:t,data:n};return(e._prepP?e._prepP:r.PROMISE_RESOLVED_VOID).then((function(){var t=e.method.postMessage(e._state,o);return e._uMP.add(t),t.catch().then((function(){return e._uMP.delete(t)})),t}))}function l(e){return e._addEL.message.length>0||e._addEL.internal.length>0}function f(e,t,n){e._addEL[t].push(n),function(e){if(!e._iL&&l(e)){var t=function(t){e._addEL[t.type].forEach((function(e){var n=1e5,r=e.time-n;t.time>=r&&e.fn(t.data)}))},n=e.method.microSeconds();e._prepP?e._prepP.then((function(){e._iL=!0,e.method.onMessage(e._state,t,n)})):(e._iL=!0,e.method.onMessage(e._state,t,n))}}(e)}function h(e,t,n){e._addEL[t]=e._addEL[t].filter((function(e){return e!==n})),function(e){if(e._iL&&!l(e)){e._iL=!1;var t=e.method.microSeconds();e.method.onMessage(e._state,null,t)}}(e)}t.BroadcastChannel=c,c._pubkey=!0,c.prototype={postMessage:function(e){if(this.closed)throw new Error("BroadcastChannel.postMessage(): Cannot post message after channel has closed "+JSON.stringify(e));return d(this,"message",e)},postInternal:function(e){return d(this,"internal",e)},set onmessage(e){var t={time:this.method.microSeconds(),fn:e};h(this,"message",this._onML),e&&"function"==typeof e?(this._onML=t,f(this,"message",t)):this._onML=null},addEventListener:function(e,t){f(this,e,{time:this.method.microSeconds(),fn:t})},removeEventListener:function(e,t){h(this,e,this._addEL[e].find((function(e){return e.fn===t})))},close:function(){var e=this;if(!this.closed){a.delete(this),this.closed=!0;var t=this._prepP?this._prepP:r.PROMISE_RESOLVED_VOID;return this._onML=null,this._addEL.message=[],t.then((function(){return Promise.all(Array.from(e._uMP))})).then((function(){return Promise.all(e._befC.map((function(e){return e()})))})).then((function(){return e.method.close(e._state)}))}},get type(){return this.method.type},get isClosed(){return this.closed}}},284:function(e,t,n){"use strict";var r=n(107);n(285);Object.defineProperty(t,"__esModule",{value:!0}),t.chooseMethod=function(e){var t=[].concat(e.methods,c).filter(Boolean);if(e.type){if("simulate"===e.type)return s.default;var n=t.find((function(t){return t.type===e.type}));if(n)return n;throw new Error("method-type "+e.type+" not found")}e.webWorkerSupport||u.isNode||(t=t.filter((function(e){return"idb"!==e.type})));var r=t.find((function(e){return e.canBeUsed()}));if(r)return r;throw new Error("No useable method found in "+JSON.stringify(c.map((function(e){return e.type}))))};var o=r(n(286)),i=r(n(287)),a=r(n(288)),s=r(n(289)),u=n(64);var c=[o.default,i.default,a.default]},285:function(e,t,n){e.exports=n(23)(832)},286:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.averageResponseTime=l,t.canBeUsed=d,t.close=s,t.create=a,t.microSeconds=t.default=void 0,t.onMessage=c,t.postMessage=u,t.type=void 0;var r=n(64),o=r.microSeconds;t.microSeconds=o;var i="native";function a(e){var t={messagesCallback:null,bc:new BroadcastChannel(e),subFns:[]};return t.bc.onmessage=function(e){t.messagesCallback&&t.messagesCallback(e.data)},t}function s(e){e.bc.close(),e.subFns=[]}function u(e,t){try{return e.bc.postMessage(t,!1),r.PROMISE_RESOLVED_VOID}catch(e){return Promise.reject(e)}}function c(e,t){e.messagesCallback=t}function d(){if(r.isNode&&"undefined"==typeof window)return!1;if("function"==typeof BroadcastChannel){if(BroadcastChannel._pubkey)throw new Error("BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill");return!0}return!1}function l(){return 150}t.type=i;var f={create:a,close:s,onMessage:c,postMessage:u,canBeUsed:d,type:i,averageResponseTime:l,microSeconds:o};t.default=f},287:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.averageResponseTime=O,t.canBeUsed=w,t.cleanOldMessages=p,t.close=b,t.create=m,t.createDatabase=c,t.default=void 0,t.getAllMessages=function(e){var t=e.transaction(s).objectStore(s),n=[];return new Promise((function(e){t.openCursor().onsuccess=function(t){var r=t.target.result;r?(n.push(r.value),r.continue()):e(n)}}))},t.getIdb=u,t.getMessagesHigherThan=l,t.getOldMessages=h,t.microSeconds=void 0,t.onMessage=E,t.postMessage=g,t.removeMessageById=f,t.type=void 0,t.writeMessage=d;var r=n(64),o=n(108),i=n(94),a=r.microSeconds;t.microSeconds=a;var s="messages";function u(){if("undefined"!=typeof indexedDB)return indexedDB;if("undefined"!=typeof window){if(void 0!==window.mozIndexedDB)return window.mozIndexedDB;if(void 0!==window.webkitIndexedDB)return window.webkitIndexedDB;if(void 0!==window.msIndexedDB)return window.msIndexedDB}return!1}function c(e){var t="pubkey.broadcast-channel-0-"+e,n=u().open(t,1);return n.onupgradeneeded=function(e){e.target.result.createObjectStore(s,{keyPath:"id",autoIncrement:!0})},new Promise((function(e,t){n.onerror=function(e){return t(e)},n.onsuccess=function(){e(n.result)}}))}function d(e,t,n){var r={uuid:t,time:(new Date).getTime(),data:n},o=e.transaction([s],"readwrite");return new Promise((function(e,t){o.oncomplete=function(){return e()},o.onerror=function(e){return t(e)},o.objectStore(s).add(r)}))}function l(e,t){var n=e.transaction(s).objectStore(s),r=[];return new Promise((function(e){(function(){try{var e=IDBKeyRange.bound(t+1,1/0);return n.openCursor(e)}catch(e){return n.openCursor()}}()).onsuccess=function(n){var o=n.target.result;o?o.value.id<t+1?o.continue(t+1):(r.push(o.value),o.continue()):e(r)}}))}function f(e,t){var n=e.transaction([s],"readwrite").objectStore(s).delete(t);return new Promise((function(e){n.onsuccess=function(){return e()}}))}function h(e,t){var n=(new Date).getTime()-t,r=e.transaction(s).objectStore(s),o=[];return new Promise((function(e){r.openCursor().onsuccess=function(t){var r=t.target.result;if(r){var i=r.value;if(!(i.time<n))return void e(o);o.push(i),r.continue()}else e(o)}}))}function p(e,t){return h(e,t).then((function(t){return Promise.all(t.map((function(t){return f(e,t.id)})))}))}function m(e,t){return t=(0,i.fillOptionsWithDefaults)(t),c(e).then((function(n){var i={closed:!1,lastCursorId:0,channelName:e,options:t,uuid:(0,r.randomToken)(),eMIs:new o.ObliviousSet(2*t.idb.ttl),writeBlockPromise:r.PROMISE_RESOLVED_VOID,messagesCallback:null,readQueuePromises:[],db:n};return n.onclose=function(){i.closed=!0,t.idb.onclose&&t.idb.onclose()},v(i),i}))}function v(e){e.closed||_(e).then((function(){return(0,r.sleep)(e.options.idb.fallbackInterval)})).then((function(){return v(e)}))}function _(e){return e.closed?r.PROMISE_RESOLVED_VOID:e.messagesCallback?l(e.db,e.lastCursorId).then((function(t){var n=t.filter((function(e){return!!e})).map((function(t){return t.id>e.lastCursorId&&(e.lastCursorId=t.id),t})).filter((function(t){return function(e,t){return!(e.uuid===t.uuid||t.eMIs.has(e.id)||e.data.time<t.messagesCallbackTime)}(t,e)})).sort((function(e,t){return e.time-t.time}));return n.forEach((function(t){e.messagesCallback&&(e.eMIs.add(t.id),e.messagesCallback(t.data))})),r.PROMISE_RESOLVED_VOID})):r.PROMISE_RESOLVED_VOID}function b(e){e.closed=!0,e.db.close()}function g(e,t){return e.writeBlockPromise=e.writeBlockPromise.then((function(){return d(e.db,e.uuid,t)})).then((function(){0===(0,r.randomInt)(0,10)&&p(e.db,e.options.idb.ttl)})),e.writeBlockPromise}function E(e,t,n){e.messagesCallbackTime=n,e.messagesCallback=t,_(e)}function w(){return!r.isNode&&!!u()}function O(e){return 2*e.idb.fallbackInterval}t.type="idb";var S={create:m,close:b,onMessage:E,postMessage:g,canBeUsed:w,type:"idb",averageResponseTime:O,microSeconds:a};t.default=S},288:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addStorageEventListener=l,t.averageResponseTime=_,t.canBeUsed=v,t.close=p,t.create=h,t.default=void 0,t.getLocalStorage=u,t.microSeconds=void 0,t.onMessage=m,t.postMessage=d,t.removeStorageEventListener=f,t.storageKey=c,t.type=void 0;var r=n(108),o=n(94),i=n(64),a=i.microSeconds;t.microSeconds=a;var s="localstorage";function u(){var e;if("undefined"==typeof window)return null;try{e=window.localStorage,e=window["ie8-eventlistener/storage"]||window.localStorage}catch(e){}return e}function c(e){return"pubkey.broadcastChannel-"+e}function d(e,t){return new Promise((function(n){(0,i.sleep)().then((function(){var r=c(e.channelName),o={token:(0,i.randomToken)(),time:(new Date).getTime(),data:t,uuid:e.uuid},a=JSON.stringify(o);u().setItem(r,a);var s=document.createEvent("Event");s.initEvent("storage",!0,!0),s.key=r,s.newValue=a,window.dispatchEvent(s),n()}))}))}function l(e,t){var n=c(e),r=function(e){e.key===n&&t(JSON.parse(e.newValue))};return window.addEventListener("storage",r),r}function f(e){window.removeEventListener("storage",e)}function h(e,t){if(t=(0,o.fillOptionsWithDefaults)(t),!v())throw new Error("BroadcastChannel: localstorage cannot be used");var n=(0,i.randomToken)(),a=new r.ObliviousSet(t.localstorage.removeTimeout),s={channelName:e,uuid:n,eMIs:a};return s.listener=l(e,(function(e){s.messagesCallback&&e.uuid!==n&&e.token&&!a.has(e.token)&&(e.data.time&&e.data.time<s.messagesCallbackTime||(a.add(e.token),s.messagesCallback(e.data)))})),s}function p(e){f(e.listener)}function m(e,t,n){e.messagesCallbackTime=n,e.messagesCallback=t}function v(){if(i.isNode)return!1;var e=u();if(!e)return!1;try{var t="__broadcastchannel_check";e.setItem(t,"works"),e.removeItem(t)}catch(e){return!1}return!0}function _(){var e=navigator.userAgent.toLowerCase();return e.includes("safari")&&!e.includes("chrome")?240:120}t.type=s;var b={create:h,close:p,onMessage:m,postMessage:d,canBeUsed:v,type:s,averageResponseTime:_,microSeconds:a};t.default=b},289:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.averageResponseTime=l,t.canBeUsed=d,t.close=s,t.create=a,t.microSeconds=t.default=void 0,t.onMessage=c,t.postMessage=u,t.type=void 0;var r=n(64).microSeconds;t.microSeconds=r;var o="simulate";t.type=o;var i=new Set;function a(e){var t={name:e,messagesCallback:null};return i.add(t),t}function s(e){i.delete(e)}function u(e,t){return new Promise((function(n){return setTimeout((function(){Array.from(i).filter((function(t){return t.name===e.name})).filter((function(t){return t!==e})).filter((function(e){return!!e.messagesCallback})).forEach((function(e){return e.messagesCallback(t)})),n()}),5)}))}function c(e,t){e.messagesCallback=t}function d(){return!0}function l(){return 5}var f={create:a,close:s,onMessage:c,postMessage:u,canBeUsed:d,type:o,averageResponseTime:l,microSeconds:r};t.default=f},290:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.beLeader=s,t.createLeaderElection=function(e,t){if(e._leaderElector)throw new Error("BroadcastChannel already has a leader-elector");t=function(e,t){e||(e={});(e=JSON.parse(JSON.stringify(e))).fallbackInterval||(e.fallbackInterval=3e3);e.responseTime||(e.responseTime=t.method.averageResponseTime(t.options));return e}(t,e);var n=new i(e,t);return e._befC.push((function(){return n.die()})),e._leaderElector=n,n};var r=n(64),o=n(291),i=function(e,t){var n=this;this.broadcastChannel=e,this._options=t,this.isLeader=!1,this.hasLeader=!1,this.isDead=!1,this.token=(0,r.randomToken)(),this._aplQ=r.PROMISE_RESOLVED_VOID,this._aplQC=0,this._unl=[],this._lstns=[],this._dpL=function(){},this._dpLC=!1;var o=function(e){"leader"===e.context&&("death"===e.action&&(n.hasLeader=!1),"tell"===e.action&&(n.hasLeader=!0))};this.broadcastChannel.addEventListener("internal",o),this._lstns.push(o)};function a(e,t){var n={context:"leader",action:t,token:e.token};return e.broadcastChannel.postInternal(n)}function s(e){e.isLeader=!0,e.hasLeader=!0;var t=(0,o.add)((function(){return e.die()}));e._unl.push(t);var n=function(t){"leader"===t.context&&"apply"===t.action&&a(e,"tell"),"leader"!==t.context||"tell"!==t.action||e._dpLC||(e._dpLC=!0,e._dpL(),a(e,"tell"))};return e.broadcastChannel.addEventListener("internal",n),e._lstns.push(n),a(e,"tell")}i.prototype={applyOnce:function(e){var t=this;if(this.isLeader)return(0,r.sleep)(0,!0);if(this.isDead)return(0,r.sleep)(0,!1);if(this._aplQC>1)return this._aplQ;return this._aplQC=this._aplQC+1,this._aplQ=this._aplQ.then((function(){return function(){if(t.isLeader)return r.PROMISE_RESOLVED_TRUE;var n,o=!1,i=new Promise((function(e){n=function(){o=!0,e()}})),u=[],c=function(e){"leader"===e.context&&e.token!=t.token&&(u.push(e),"apply"===e.action&&e.token>t.token&&n(),"tell"===e.action&&(n(),t.hasLeader=!0))};t.broadcastChannel.addEventListener("internal",c);var d=e?4*t._options.responseTime:t._options.responseTime;return a(t,"apply").then((function(){return Promise.race([(0,r.sleep)(d),i.then((function(){return Promise.reject(new Error)}))])})).then((function(){return a(t,"apply")})).then((function(){return Promise.race([(0,r.sleep)(d),i.then((function(){return Promise.reject(new Error)}))])})).catch((function(){})).then((function(){return t.broadcastChannel.removeEventListener("internal",c),!o&&s(t).then((function(){return!0}))}))}()})).then((function(){t._aplQC=t._aplQC-1})),this._aplQ.then((function(){return t.isLeader}))},awaitLeadership:function(){return this._aLP||(this._aLP=function(e){if(e.isLeader)return r.PROMISE_RESOLVED_VOID;return new Promise((function(t){var n=!1;function o(){n||(n=!0,e.broadcastChannel.removeEventListener("internal",i),t(!0))}e.applyOnce().then((function(){e.isLeader&&o()})),function t(){return(0,r.sleep)(e._options.fallbackInterval).then((function(){if(!e.isDead&&!n)return e.isLeader?void o():e.applyOnce(!0).then((function(){e.isLeader?o():t()}))}))}();var i=function(t){"leader"===t.context&&"death"===t.action&&(e.hasLeader=!1,e.applyOnce().then((function(){e.isLeader&&o()})))};e.broadcastChannel.addEventListener("internal",i),e._lstns.push(i)}))}(this)),this._aLP},set onduplicate(e){this._dpL=e},die:function(){var e=this;return this._lstns.forEach((function(t){return e.broadcastChannel.removeEventListener("internal",t)})),this._lstns=[],this._unl.forEach((function(e){return e.remove()})),this._unl=[],this.isLeader&&(this.hasLeader=!1,this.isLeader=!1),this.isDead=!0,a(this,"death")}}},291:function(e,t,n){"use strict";var r=n(107);Object.defineProperty(t,"__esModule",{value:!0}),t.add=function(e){if(function(){if(c)return;c=!0,s.add(d)}(),"function"!=typeof e)throw new Error("Listener is no function");return u.add(e),{remove:function(){return u.delete(e)},run:function(){return u.delete(e),e()}}},t.getSize=function(){return u.size},t.removeAll=function(){u.clear()},t.runAll=d;var o=r(n(292)),i=r(n(293)),a=r(n(294)),s=o.default?a.default:i.default,u=new Set,c=!1;function d(){var e=[];return u.forEach((function(t){e.push(t()),u.delete(t)})),Promise.all(e)}},292:function(e,t){e.exports=!1},293:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r={add:function(e){if("function"==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope);else{if("function"!=typeof window.addEventListener)return;window.addEventListener("beforeunload",(function(){e()}),!0),window.addEventListener("unload",(function(){e()}),!0)}}};t.default=r},294:function(e,t){},301:function(e,t,n){"use strict";var r=n(282);e.exports={BroadcastChannel:r.BroadcastChannel,createLeaderElection:r.createLeaderElection,clearNodeFolder:r.clearNodeFolder,enforceOptions:r.enforceOptions,beLeader:r.beLeader}},64:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.isNode=t.PROMISE_RESOLVED_VOID=t.PROMISE_RESOLVED_TRUE=t.PROMISE_RESOLVED_FALSE=void 0,t.isPromise=function(e){return!(!e||"function"!=typeof e.then)},t.microSeconds=function(){var e=(new Date).getTime();return e===i?(a++,1e3*e+a):(i=e,a=0,1e3*e)},t.randomInt=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)},t.randomToken=function(){return Math.random().toString(36).substring(2)},t.sleep=function(e,t){e||(e=0);return new Promise((function(n){return setTimeout((function(){return n(t)}),e)}))};var n=Promise.resolve(!1);t.PROMISE_RESOLVED_FALSE=n;var r=Promise.resolve(!0);t.PROMISE_RESOLVED_TRUE=r;var o=Promise.resolve();t.PROMISE_RESOLVED_VOID=o;var i=0,a=0;var s="[object process]"===Object.prototype.toString.call(void 0!==e?e:0);t.isNode=s}).call(this,n(84))},84:function(e,t,n){e.exports=n(23)(914)},94:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fillOptionsWithDefaults=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=JSON.parse(JSON.stringify(e));void 0===t.webWorkerSupport&&(t.webWorkerSupport=!0);t.idb||(t.idb={});t.idb.ttl||(t.idb.ttl=45e3);t.idb.fallbackInterval||(t.idb.fallbackInterval=150);e.idb&&"function"==typeof e.idb.onclose&&(t.idb.onclose=e.idb.onclose);t.localstorage||(t.localstorage={});t.localstorage.removeTimeout||(t.localstorage.removeTimeout=6e4);e.methods&&(t.methods=e.methods);t.node||(t.node={});t.node.ttl||(t.node.ttl=12e4);t.node.maxParallelWrites||(t.node.maxParallelWrites=2048);void 0===t.node.useFastPath&&(t.node.useFastPath=!0);return t}}}]);