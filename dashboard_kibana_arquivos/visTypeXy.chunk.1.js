(window.visTypeXy_bundle_jsonpfunction=window.visTypeXy_bundle_jsonpfunction||[]).push([[1],Array(32).concat([function(e,t,o){"use strict";var n,i=function(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n},a=function(){var e={};return function(t){if(void 0===e[t]){var o=document.querySelector(t);if(window.HTMLIFrameElement&&o instanceof window.HTMLIFrameElement)try{o=o.contentDocument.head}catch(e){o=null}e[t]=o}return e[t]}}(),r=[];function l(e){for(var t=-1,o=0;o<r.length;o++)if(r[o].identifier===e){t=o;break}return t}function s(e,t){for(var o={},n=[],i=0;i<e.length;i++){var a=e[i],s=t.base?a[0]+t.base:a[0],d=o[s]||0,c="".concat(s," ").concat(d);o[s]=d+1;var u=l(c),p={css:a[1],media:a[2],sourceMap:a[3]};-1!==u?(r[u].references++,r[u].updater(p)):r.push({identifier:c,updater:g(p,t),references:1}),n.push(c)}return n}function d(e){var t=document.createElement("style"),n=e.attributes||{};if(void 0===n.nonce){var i=o.nc;i&&(n.nonce=i)}if(Object.keys(n).forEach((function(e){t.setAttribute(e,n[e])})),"function"==typeof e.insert)e.insert(t);else{var r=a(e.insert||"head");if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}return t}var c,u=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function p(e,t,o,n){var i=o?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(e.styleSheet)e.styleSheet.cssText=u(t,i);else{var a=document.createTextNode(i),r=e.childNodes;r[t]&&e.removeChild(r[t]),r.length?e.insertBefore(a,r[t]):e.appendChild(a)}}function v(e,t,o){var n=o.css,i=o.media,a=o.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),a&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var m=null,f=0;function g(e,t){var o,n,i;if(t.singleton){var a=f++;o=m||(m=d(t)),n=p.bind(null,o,a,!1),i=p.bind(null,o,a,!0)}else o=d(t),n=v.bind(null,o,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(o)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=i());var o=s(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var n=0;n<o.length;n++){var i=l(o[n]);r[i].references--}for(var a=s(e,t),d=0;d<o.length;d++){var c=l(o[d]);0===r[c].references&&(r[c].updater(),r.splice(c,1))}o=a}}}},function(e,t,o){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var o=function(e,t){var o=e[1]||"",n=e[3];if(!n)return o;if(t&&"function"==typeof btoa){var i=(r=n,l=btoa(unescape(encodeURIComponent(JSON.stringify(r)))),s="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(l),"/*# ".concat(s," */")),a=n.sources.map((function(e){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(e," */")}));return[o].concat(a).concat([i]).join("\n")}var r,l,s;return[o].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(o,"}"):o})).join("")},t.i=function(e,o,n){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(n)for(var a=0;a<this.length;a++){var r=this[a][0];null!=r&&(i[r]=!0)}for(var l=0;l<e.length;l++){var s=[].concat(e[l]);n&&i[s[0]]||(o&&(s[2]?s[2]="".concat(o," and ").concat(s[2]):s[2]=o),t.push(s))}},t}},function(e,t,o){switch(window.__kbnThemeTag__){case"v7dark":return o(35);case"v7light":return o(37);case"v8dark":return o(39);case"v8light":return o(41)}},function(e,t,o){var n=o(32),i=o(36);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var a={insert:"head",singleton:!1};n(i,a);e.exports=i.locals||{}},function(e,t,o){(t=o(33)(!1)).push([e.i,".detailedTooltip{box-shadow:0 12px 24px 0 rgba(0,0,0,0.1),0 6px 12px 0 rgba(0,0,0,0.1),0 4px 4px 0 rgba(0,0,0,0.1),0 2px 2px 0 rgba(0,0,0,0.1);border-radius:4px;background-color:#000;color:#fff;z-index:9000;max-width:256px;overflow-wrap:break-word;font-size:12px;font-size:.75rem;line-height:1.5;padding:8px;pointer-events:none;max-width:320px;overflow:hidden;padding:8px}.detailedTooltip table td,.detailedTooltip table th{text-align:left;padding:4px;overflow-wrap:break-word;word-wrap:break-word}.detailedTooltip__header>:last-child{margin-bottom:8px}.detailedTooltip__labelContainer,.detailedTooltip__valueContainer{overflow-wrap:break-word;word-wrap:break-word}.detailedTooltip__label{font-weight:500;color:#ccc}\n",""]),e.exports=t},function(e,t,o){var n=o(32),i=o(38);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var a={insert:"head",singleton:!1};n(i,a);e.exports=i.locals||{}},function(e,t,o){(t=o(33)(!1)).push([e.i,".detailedTooltip{box-shadow:0 12px 24px 0 rgba(0,0,0,0.1),0 6px 12px 0 rgba(0,0,0,0.1),0 4px 4px 0 rgba(0,0,0,0.1),0 2px 2px 0 rgba(0,0,0,0.1);border-radius:4px;background-color:#404040;color:#fff;z-index:9000;max-width:256px;overflow-wrap:break-word;font-size:12px;font-size:.75rem;line-height:1.5;padding:8px;pointer-events:none;max-width:320px;overflow:hidden;padding:8px}.detailedTooltip table td,.detailedTooltip table th{text-align:left;padding:4px;overflow-wrap:break-word;word-wrap:break-word}.detailedTooltip__header>:last-child{margin-bottom:8px}.detailedTooltip__labelContainer,.detailedTooltip__valueContainer{overflow-wrap:break-word;word-wrap:break-word}.detailedTooltip__label{font-weight:500;color:#ccc}\n",""]),e.exports=t},function(e,t,o){var n=o(32),i=o(40);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var a={insert:"head",singleton:!1};n(i,a);e.exports=i.locals||{}},function(e,t,o){(t=o(33)(!1)).push([e.i,".detailedTooltip{box-shadow:0 1px 5px rgba(0,0,0,0.25),0 3.6px 13px rgba(0,0,0,0.175),0 8.4px 23px rgba(0,0,0,0.15),0 23px 35px rgba(0,0,0,0.125);border-radius:6px;background-color:#000;color:#fff;z-index:9000;max-width:256px;overflow-wrap:break-word;font-size:12px;font-size:.85714rem;line-height:1.14286rem;padding:8px;pointer-events:none;max-width:320px;overflow:hidden;padding:8px}.detailedTooltip table td,.detailedTooltip table th{text-align:left;padding:4px;overflow-wrap:break-word;word-wrap:break-word}.detailedTooltip__header>:last-child{margin-bottom:8px}.detailedTooltip__labelContainer,.detailedTooltip__valueContainer{overflow-wrap:break-word;word-wrap:break-word}.detailedTooltip__label{font-weight:500;color:#ccc}\n",""]),e.exports=t},function(e,t,o){var n=o(32),i=o(42);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var a={insert:"head",singleton:!1};n(i,a);e.exports=i.locals||{}},function(e,t,o){(t=o(33)(!1)).push([e.i,".detailedTooltip{box-shadow:0 1px 5px rgba(0,0,0,0.1),0 3.6px 13px rgba(0,0,0,0.07),0 8.4px 23px rgba(0,0,0,0.06),0 23px 35px rgba(0,0,0,0.05);border-radius:6px;background-color:#404040;color:#fff;z-index:9000;max-width:256px;overflow-wrap:break-word;font-size:12px;font-size:.85714rem;line-height:1.14286rem;padding:8px;pointer-events:none;max-width:320px;overflow:hidden;padding:8px}.detailedTooltip table td,.detailedTooltip table th{text-align:left;padding:4px;overflow-wrap:break-word;word-wrap:break-word}.detailedTooltip__header>:last-child{margin-bottom:8px}.detailedTooltip__labelContainer,.detailedTooltip__valueContainer{overflow-wrap:break-word;word-wrap:break-word}.detailedTooltip__label{font-weight:500;color:#ccc}\n",""]),e.exports=t},function(e,t,o){switch(window.__kbnThemeTag__){case"v7dark":return o(44);case"v7light":return o(46);case"v8dark":return o(48);case"v8light":return o(50)}},function(e,t,o){var n=o(32),i=o(45);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var a={insert:"head",singleton:!1};n(i,a);e.exports=i.locals||{}},function(e,t,o){(t=o(33)(!1)).push([e.i,".xyChart__container{position:absolute;top:0;right:0;bottom:0;left:0}\n",""]),e.exports=t},function(e,t,o){var n=o(32),i=o(47);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var a={insert:"head",singleton:!1};n(i,a);e.exports=i.locals||{}},function(e,t,o){(t=o(33)(!1)).push([e.i,".xyChart__container{position:absolute;top:0;right:0;bottom:0;left:0}\n",""]),e.exports=t},function(e,t,o){var n=o(32),i=o(49);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var a={insert:"head",singleton:!1};n(i,a);e.exports=i.locals||{}},function(e,t,o){(t=o(33)(!1)).push([e.i,".xyChart__container{position:absolute;top:0;right:0;bottom:0;left:0}\n",""]),e.exports=t},function(e,t,o){var n=o(32),i=o(51);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var a={insert:"head",singleton:!1};n(i,a);e.exports=i.locals||{}},function(e,t,o){(t=o(33)(!1)).push([e.i,".xyChart__container{position:absolute;top:0;right:0;bottom:0;left:0}\n",""]),e.exports=t},function(e,t,o){"use strict";o.r(t);var n=o(13),i=o.n(n),a=o(9),r=o.n(a),l=o(4),s=o(29),d=o(8),c=o(6),u=o(2);const p="__complexSplitAccessor__",v=(e,t)=>`${e}${void 0!==t?`::${t}`:""}`,m=e=>e===u.BUCKET_TYPES.DATE_RANGE||e===u.BUCKET_TYPES.RANGE||e===u.BUCKET_TYPES.IP_RANGE,f=(e,t=!1)=>(o,n)=>{if(!o.accessor||"shard_delay"===o.aggType)return;if(!t&&!m(o.aggType)||!o.formatter)return o.accessor;const i=o.formatter,a=o.accessor,r=e=>{const t=e[a];if(void 0===t)return;return i(t)};return r.fieldName=v(e,n),r},g=e=>{const t=new Map;return e.forEach(((e,o)=>{if("function"==typeof e){const n=v(p,o);t.set(n,e)}})),t},h=e=>{const t=String(e);if(!(t.includes("[")||t.includes(".")))return t;return t.substring(0,-1!==t.indexOf("[")?t.indexOf("["):t.indexOf("."))},b=(e,{aggId:t,accessor:o})=>(t===e||((e,t)=>h(e)===t)(null!=t?t:"",e))&&null!==o;var x=o(7);const y=e=>{switch(e){case"cardinal":return l.CurveType.CURVE_MONOTONE_X;case"step-after":return l.CurveType.CURVE_STEP_AFTER;default:return l.CurveType.LINEAR}},w=({aspects:e,yAxes:t,xAxis:o,showValueLabel:n,enableHistogramMode:i,fittingFunction:a,fillOpacity:r},d,u,p,v,m,f,g)=>{let h=[];return t.forEach((t=>{const o=t.scale,n=d.filter((e=>e.valueAxis===t.groupId)),i=[];n.forEach((t=>{const o=t.data.id,n=e.y.filter((e=>e.aggId===o));i.push(...n)}));const a=i.map((e=>e.accessor));if("percentage"===o.mode){var r,l;const t=(null===(r=e.splitColumn)||void 0===r?void 0:r.accessor)||(null===(l=e.splitRow)||void 0===l?void 0:l.accessor);h=((e,t,o,n)=>{const i=Object(s.groupBy)(e,(function(e){return e[String(t)]}));if(n)for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e)){const t=Object(s.groupBy)(i[e],n);for(const o in t)Object.prototype.hasOwnProperty.call(t,o)&&(i[`${e}-${o}`]=t[o])}const a={};for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e)){let t=0;i[e].forEach((e=>{for(const n of o)t+=e[n]})),a[e]=t}return e.forEach((e=>{var i;const r=n?`${e[String(t)]}-${e[n]}`:e[String(t)],l=null!==(i=a[r])&&void 0!==i?i:0;let s=0;for(const t of o)s+=e[t];const d=s/l;for(const t of o)e[t]=d/s*e[t]})),e})(u,f,a,t)}})),d.map((({show:s,valueAxis:d,data:{id:w},lineWidth:T,showCircles:j,circlesRadius:_,drawLinesBetweenPoints:O,mode:C,interpolate:k,type:S})=>{var A,E,L,M;const P=e.y.filter((e=>b(w,e)));if(!s||!P.length)return null;const I=P.map((e=>e.accessor)),D=`${S}-${I[0]}`,R=null===(A=t.find((({groupId:e})=>e===d)))||void 0===A?void 0:A.scale,z="stacked"===C,B="normal"===(null==R?void 0:R.mode)||null==R?void 0:R.mode,V=z?`__pseudo_stacked_group-${d}__`:d,N=z?d:void 0;switch(S){case c.ChartType.Histogram:return Object(x.jsx)(l.BarSeries,{key:D,id:D,name:p,color:v,tickFormat:P[0].formatter,groupId:V,useDefaultGroupDomain:N,xScaleType:o.scale.type,yScaleType:null==R?void 0:R.type,xAccessor:f,yAccessors:I,splitSeriesAccessors:g,data:z||"percentage"!==(null==R?void 0:R.mode)?u:h,timeZone:m,stackAccessors:z?["__any_value__"]:void 0,enableHistogramMode:i,stackMode:B,minBarHeight:2,displayValueSettings:{showValueLabel:n,isValueContainedInElement:!1,isAlternatingValueLabel:!1,overflowConstraints:[l.LabelOverflowConstraint.ChartEdges,l.LabelOverflowConstraint.BarGeometry]}});case c.ChartType.Area:case c.ChartType.Line:const t=j&&null!==(E=null===(L=e.z)||void 0===L?void 0:L.accessor)&&void 0!==E?E:void 0;return Object(x.jsx)(l.AreaSeries,{key:D,id:D,fit:a,color:v,tickFormat:P[0].formatter,name:p,curve:y(k),groupId:V,useDefaultGroupDomain:N,xScaleType:o.scale.type,yScaleType:null==R?void 0:R.type,xAccessor:f,yAccessors:I,markSizeAccessor:t,markFormat:null===(M=e.z)||void 0===M?void 0:M.formatter,splitSeriesAccessors:g,data:z||"percentage"!==(null==R?void 0:R.mode)?u:h,stackAccessors:z?["__any_value__"]:void 0,displayValueSettings:{showValueLabel:n,overflowConstraints:[l.LabelOverflowConstraint.ChartEdges]},timeZone:m,stackMode:B,areaSeriesStyle:{area:{...S===c.ChartType.Line?{opacity:0}:{opacity:r}},line:{strokeWidth:T,visible:O},point:{visible:j,fill:t?l.ColorVariant.Series:void 0,radius:_}}});default:return null}}))};var T=o(22),j=o.n(T),_=o(10);var O=o(0),C=o(14);const k=(e,t,o,n)=>({series:[i]})=>{const[r,l]=Object(a.useState)(!1),[s,d]=Object(a.useState)(!1),c=i,u=Object(a.useMemo)((()=>t(c)),[c]);if(Object(a.useEffect)((()=>{(async()=>{d(await e(u))})()}),[u]),!s||!u)return null;const p=n(c),v=[{id:"main",title:`${p}`,items:[{name:O.i18n.translate("visTypeXy.legend.filterForValueButtonAriaLabel",{defaultMessage:"Filter for value"}),"data-test-subj":`legend-${p}-filterIn`,icon:Object(x.jsx)(C.EuiIcon,{type:"plusInCircle",size:"m"}),onClick:()=>{l(!1),o(u)}},{name:O.i18n.translate("visTypeXy.legend.filterOutValueButtonAriaLabel",{defaultMessage:"Filter out value"}),"data-test-subj":`legend-${p}-filterOut`,icon:Object(x.jsx)(C.EuiIcon,{type:"minusInCircle",size:"m"}),onClick:()=>{l(!1),o(u,!0)}}]}],m=Object(x.jsx)("div",{tabIndex:0,role:"button","aria-pressed":"false",style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",marginLeft:4,marginRight:4},"data-test-subj":`legend-${p}`,onKeyPress:()=>l(!r),onClick:()=>l(!r)},Object(x.jsx)(C.EuiIcon,{size:"s",type:"boxesVertical"}));return Object(x.jsx)(C.EuiPopover,{id:"contextMenuNormal",button:m,isOpen:r,closePopover:()=>l(!1),panelPaddingSize:"none",anchorPosition:"upLeft",title:O.i18n.translate("visTypeXy.legend.filterOptionsLegend",{defaultMessage:"{legendDataLabel}, filter options",values:{legendDataLabel:p}})},Object(x.jsx)(C.EuiContextMenu,{initialPanelId:"main",panels:v}))};function S(e){switch(e){case l.Position.Bottom:return"upCenter";case l.Position.Top:return"downCenter";case l.Position.Left:return"rightCenter";default:return"leftCenter"}}const A=({id:e,title:t,show:o,position:n,groupId:i,grid:a,ticks:r,domain:s,style:d,integersOnly:c})=>Object(x.jsx)(l.Axis,{id:`${e}__axis`,groupId:i,hide:!o,title:t,style:d,domain:s,position:n,integersOnly:c,showGridLines:null==a?void 0:a.show,tickFormat:null==r?void 0:r.formatter,labelFormat:null==r?void 0:r.labelFormatter,showOverlappingLabels:null==r?void 0:r.showOverlappingLabels,showDuplicatedTicks:null==r?void 0:r.showDuplicates}),E=({enabled:e,isDarkMode:t,isFullBin:o,hideTooltips:n,domain:i,adjustedDomain:a})=>e&&i&&a&&"min"in i&&"max"in i&&void 0!==i.minInterval&&"min"in a&&"max"in a?Object(x.jsx)(d.Endzones,{isFullBin:o,isDarkMode:t,domainStart:i.min,domainEnd:i.max,interval:i.minInterval,domainMin:a.min,domainMax:a.max,hideTooltips:n}):null,L=({enabled:e,isDarkMode:t,domain:o})=>{if(!e)return null;const n=o&&"max"in o?o.max:void 0;return Object(x.jsx)(d.CurrentTime,{isDarkMode:t,domainEnd:n})};const M=({markSizeRatio:e,rotation:t,enableHistogramMode:o,tooltip:n,isTimeChart:i,xAxis:a,orderBucketsBySum:r,xDomain:s,adjustedXDomain:c,showLegend:u,onElementClick:p,onPointerUpdate:v,onBrushEnd:m,onRenderChange:f,legendAction:g,legendColorPicker:h,legendPosition:b,maxLegendLines:y,truncateLegend:w})=>{var T,j,O,C,k,S,A;const E=Object(_.e)(),L=E.useChartsTheme(),M=E.useChartsBaseTheme(),P={markSizeRatio:e,sharedStyle:{unhighlighted:{opacity:Object(_.g)().get("visualization:dimmingOpacity")}},barSeriesStyle:{...{displayValue:{fontSize:{min:10,max:12},alignment:{horizontal:l.HorizontalAlignment.Center,vertical:l.VerticalAlignment.Middle}}}},legend:{labelOptions:{maxLines:w?null!=y?y:1:0}},axes:{axisTitle:{padding:{outer:10}}},chartMargins:b===l.Position.Top||b===l.Position.Right?{bottom:(null!==(T=null===(j=L.chartMargins)||void 0===j?void 0:j.bottom)&&void 0!==T?T:0)+10}:{right:(null!==(O=null===(C=L.chartMargins)||void 0===C?void 0:C.right)&&void 0!==O?O:0)+10}},I=null!==(k=a.ticks)&&void 0!==k&&k.formatter?e=>{var t,o,n;return null!==(t=null===(o=a.ticks)||void 0===o||null===(n=o.formatter)||void 0===n?void 0:n.call(o,e))&&void 0!==t?t:""}:void 0,D=i&&s&&c?Object(d.renderEndzoneTooltip)(s.minInterval,"min"in s?s.min:void 0,"max"in s?s.max:void 0,I,!n.detailedTooltip):I&&(n.detailedTooltip?void 0:({value:e})=>I(e)),R=null!==(S=document.getElementById("app-fixed-viewport"))&&void 0!==S?S:void 0,z=n.detailedTooltip?{...n,boundary:R,customTooltip:n.detailedTooltip(D),headerFormatter:void 0}:{...n,boundary:R,headerFormatter:D};return Object(x.jsx)(l.Settings,{debugState:null!==(A=window._echDebugStateFlag)&&void 0!==A&&A,onPointerUpdate:v,xDomain:c,rotation:t,theme:[P,L],baseTheme:M,showLegend:u,legendPosition:b,allowBrushingLastHistogramBin:i,roundHistogramBrushValues:o&&!i,legendColorPicker:h,onElementClick:p,onBrushEnd:m,onRenderChange:f,legendAction:g,tooltip:z,orderOrdinalBinsBy:r?{direction:l.Direction.Descending}:void 0})},P=({show:e,value:t,color:o,width:n,groupId:i,dash:a})=>e?Object(x.jsx)(l.LineAnnotation,{id:"__threshold_line__",groupId:i,domainType:l.AnnotationDomainType.YDomain,dataValues:[{dataValue:t}],style:{line:{stroke:o,strokeWidth:null!=n?n:2,opacity:1,dash:a}}}):null;var I=o(1);function D({style:e,...t},o,n){var i;const a=null===(i=o.find((({id:e})=>n.some((({valueAxis:t})=>e===t)))))||void 0===i?void 0:i.groupId;return{...t,dash:R(e),groupId:a}}function R(e){switch(e){case I.f.Dashed:return[10,5];case I.f.DotDashed:return[20,5,5,5];case I.f.Full:default:return}}function z({position:e}){return"left"===e||"right"===e?90:0}o(34);const B=({label:e,value:t},o)=>e&&t?Object(x.jsx)("tr",{key:e+t+o},Object(x.jsx)("td",{className:"detailedTooltip__label"},Object(x.jsx)("div",{className:"detailedTooltip__labelContainer"},e)),Object(x.jsx)("td",{className:"detailedTooltip__value"},Object(x.jsx)("div",{className:"detailedTooltip__valueContainer"},t))):null,V=e=>t=>function({header:o,values:n}){const i=n.find((({isHighlighted:e})=>e));if(!i)return null;const a=((e,t,o)=>{var n;const i=[];if(t){const o=m(e.x.aggType)?null:e.x.formatter;i.push({label:e.x.title,value:o?o(t.value):`${t.value}`})}const a=o.seriesIdentifier,r=null!==(n=e.y.find((({accessor:e})=>e===a.yAccessor)))&&void 0!==n?n:null;return r&&i.push({label:r.title,value:r.formatter?r.formatter(o.value):`${o.value}`}),e.z&&!Object(s.isNil)(o.markValue)&&i.push({label:e.z.title,value:e.z.formatter?e.z.formatter(o.markValue):`${o.markValue}`}),a.splitAccessors.forEach(((t,o)=>{var n;const a=(null!==(n=e.series)&&void 0!==n?n:[]).find((({accessor:e},t)=>e===o||o===`__complexSplitAccessor__::${t}`));a&&i.push({label:null==a?void 0:a.title,value:null!=a&&a.formatter&&!o.toString().startsWith(p)?null==a?void 0:a.formatter(t):`${t}`})})),e.splitColumn&&void 0!==a.smHorizontalAccessorValue&&void 0!==a.smHorizontalAccessorValue&&i.push({label:e.splitColumn.title,value:`${a.smHorizontalAccessorValue}`}),e.splitRow&&void 0!==a.smVerticalAccessorValue&&void 0!==a.smVerticalAccessorValue&&i.push({label:e.splitRow.title,value:`${a.smVerticalAccessorValue}`}),i})(e,o,i);return 0===a.length?null:Object(x.jsx)("div",{className:"detailedTooltip"},t&&o&&Object(x.jsx)("div",{className:"detailedTooltip__header"},t(o)),Object(x.jsx)("table",null,Object(x.jsx)("tbody",null,a.map(B))))};function N({addLegend:e,legendPosition:t}){return{show:e,position:t}}function F({type:e,title:t,labels:o,scale:n,...i},{categoryLines:a,valueAxis:r},{params:l,format:c,formatter:p,title:v="",aggType:m},f,g=!1){const h=e===I.b.Category,b=(h||f.some((({valueAxis:e})=>e===i.id)))&&i.show,x=i.id,y=h?{show:a}:{show:r===i.id},w=m===u.BUCKET_TYPES.DATE_RANGE||m===u.BUCKET_TYPES.RANGE?s.identity:p,T={formatter:w,labelFormatter:$(o.truncate,w),show:o.show,rotation:o.rotate,showOverlappingLabels:!o.filter,showDuplicates:!o.filter},j=function(e,t,o,n){var i;const a=n?H(e,"number"===(null==o?void 0:o.id)||"number"===(null==o||null===(i=o.params)||void 0===i?void 0:i.id)&&(null==o?void 0:o.id)!==u.BUCKET_TYPES.RANGE&&(null==o?void 0:o.id)!==u.BUCKET_TYPES.TERMS,"date"in t,"interval"in t):H(e,!0);return{...e,type:a}}(n,l,c,h),_=t.text||v,O=h&&g?d.LabelRotation.Horizontal:d.LabelRotation.Vertical;return{...i,show:b,groupId:x,title:_,ticks:T,grid:y,scale:j,style:U(T,_,O),domain:G(j,h),integersOnly:"count"===m}}function $(e,t){return null==e?t:o=>{const n=`${t?t(o):o}`;return n.length>e?`${n.slice(0,e)}...`:n}}function H(e,t,o=!1,n=!1){if(o)return l.ScaleType.Time;if(n)return l.ScaleType.Linear;if(!t)return l.ScaleType.Ordinal;const i=null==e?void 0:e.type;return i===I.e.SquareRoot?l.ScaleType.Sqrt:i}function U(e,t,o=d.LabelRotation.Vertical){var n;return{axisTitle:{visible:(null!=t?t:"").trim().length>0},tickLabel:{visible:null==e?void 0:e.show,rotation:-(null!==(n=null==e?void 0:e.rotation)&&void 0!==n?n:o)}}}function G(e,t){if(t||!e)return;const{min:o,max:n,defaultYExtents:i,boundsMargin:a}=e;return{fit:i,padding:a||void 0,min:null!=o?o:NaN,max:null!=n?n:NaN}}var K=o(20);function Y(e,t){if(!t)return;if(Array.isArray(t))return Object(s.compact)(t.map((t=>{const o=t&&e[t.accessor];return o&&X(o,t)})));const o=e[t.accessor];return o&&X(o,t)}const X=({id:e,name:t},{accessor:o,format:n,params:i,aggType:a})=>({accessor:e,column:o,title:t,format:n,aggType:a,aggId:Object(K.a)(e),formatter:e=>Object(_.c)().deserialize(n).convert(e),params:i});var W=o(24);function q(e,t){var o,n,i,a,r;const{thresholdLine:s,orderBucketsBySum:d,addTimeMarker:c,radiusRatio:p,labels:v,fittingFunction:m,detailedTooltip:f,isVislibVis:g,fillOpacity:b}=t,x=function(e,{x:t,y:o,z:n,series:i,splitColumn:a,splitRow:r}){var l,s;const d=Array.isArray(i)||void 0===i?i:[i];return{x:null!==(l=Y(e,t))&&void 0!==l?l:{accessor:null,aggId:null,aggType:null,title:O.i18n.translate("visTypeXy.aggResponse.allDocsTitle",{defaultMessage:"All docs"}),params:{defaultValue:"_all"}},y:null!==(s=Y(e,o))&&void 0!==s?s:[],z:n&&(null==n?void 0:n.length)>0?Y(e,n[0]):void 0,series:Y(e,d),splitColumn:null!=a&&a.length?Y(e,a[0]):void 0,splitRow:null!=r&&r.length?Y(e,r[0]):void 0}}(e.columns,t.dimensions),y=F(t.categoryAxes[0],t.grid,x.x,t.seriesParams,(null===(o=t.dimensions.x)||void 0===o?void 0:o.aggType)===u.BUCKET_TYPES.DATE_HISTOGRAM),w=function(e,{addTooltip:t,detailedTooltip:o}){return{type:t?l.TooltipType.VerticalCursor:l.TooltipType.None,detailedTooltip:o?V(e):void 0}}(x,t),T=[],j=new Set;t.dimensions.y.forEach((e=>{const o=e.accessor,n=x.y.find((({column:e})=>e===o)),i=h(null==n?void 0:n.aggId),a=t.seriesParams.find((({data:{id:e}})=>e===i)),r=t.valueAxes.find((({id:e})=>e===(null==a?void 0:a.valueAxis)));n&&r&&!j.has(i)&&(T.push(F(r,t.grid,n,t.seriesParams)),j.add(i))}));const _=((null===(n=t.dimensions.x)||void 0===n?void 0:n.aggType)===u.BUCKET_TYPES.DATE_HISTOGRAM||(null===(i=t.dimensions.x)||void 0===i?void 0:i.aggType)===u.BUCKET_TYPES.HISTOGRAM)&&Z(t.seriesParams,x.y,T),C=null!==(a=x.x.params.date)&&void 0!==a&&a;return{markSizeRatio:.6*p,fittingFunction:m,fillOpacity:b,detailedTooltip:f,orderBucketsBySum:d,isTimeChart:C,isVislibVis:g,showCurrentTime:c&&C,showValueLabel:null!==(r=v.show)&&void 0!==r&&r,enableHistogramMode:_,tooltip:w,aspects:x,xAxis:y,yAxes:T,legend:N(t),rotation:z(t.categoryAxes[0]),thresholdLine:D(s,T,t.seriesParams)}}const Z=(e,t,o)=>{const n=e.filter((({type:e,data:{id:o}})=>e===W.ChartType.Histogram&&void 0!==t.find((({aggId:e})=>e===o))));return!([...n.reduce(((e,{valueAxis:t,mode:o})=>(e.add(t),e)),new Set)].length>1)&&n.every((({valueAxis:e,mode:t})=>"stacked"===t))};o(43);const J="__chart_splitter__",Q=({splitColumnAccessor:e,splitRowAccessor:t,splitDimension:o})=>{var n,i;let a="alphaDesc";if("terms"===(null==o||null===(n=o.meta)||void 0===n||null===(i=n.params)||void 0===i?void 0:i.id)){var s,d;const e=null==o||null===(s=o.meta)||void 0===s||null===(d=s.sourceParams)||void 0===d?void 0:d.params;a="asc"===(null==e?void 0:e.order)?"alphaAsc":"alphaDesc"}return e||t?Object(x.jsx)(r.a.Fragment,null,Object(x.jsx)(l.GroupBy,{id:J,by:(o,n)=>{const i=e||t;return i?"function"==typeof i?i(n):n[i]:o.id},sort:a}),Object(x.jsx)(l.SmallMultiples,{splitVertically:t?J:void 0,splitHorizontally:e?J:void 0})):null},ee=e=>{var t,o,n;const[r,u]=Object(a.useState)((()=>{var t;const o=null==e.visParams.addLegend||e.visParams.addLegend;return null===(t=e.uiState)||void 0===t?void 0:t.get("vis.legendOpen",o)})),[v,m]=Object(a.useState)(null),h=Object(a.useRef)(null),b=Object(d.useActiveCursor)(Object(_.a)(),h,{datatables:[e.visData]}),y=Object(a.useCallback)((t=>{t&&e.renderComplete()}),[e]);Object(a.useEffect)((()=>{(async()=>{const e=await Object(_.d)().getPalettes();m(e)})()}),[]);const T=Object(a.useCallback)(((t,o,n,i)=>{const a=g(n);return n=>{if(null!==o){const r=Object(d.getFilterFromChartClickEventFn)(t,o,a,i)(n);e.fireEvent(r)}}}),[e]),O=Object(a.useCallback)(((t,o,n)=>{if(null!==o&&n)return n=>{const i=Object(d.getBrushFromChartBrushEventFn)(t,o)(n);e.fireEvent(i)}}),[e]),I=Object(a.useCallback)(((e,t,o)=>{const n=g(o);return o=>null!==t?Object(d.getFilterFromSeriesFn)(e)(o,n):null}),[]),D=Object(a.useCallback)(((t,o=!1)=>{e.fireEvent({...t,data:{...t.data,negate:o}})}),[e]),R=Object(a.useCallback)((()=>{u((t=>{var o;const n=!t;return null!==(o=e.uiState)&&void 0!==o&&o.set&&e.uiState.set("vis.legendOpen",n),n}))}),[e.uiState]),z=Object(a.useCallback)(((t,o)=>{var n,i;const a=(null===(n=e.uiState)||void 0===n?void 0:n.get("vis.colors"))||{};a[o]!==t&&t?a[o]=t:delete a[o],null!==(i=e.uiState)&&void 0!==i&&i.set&&(e.uiState.setSilent("vis.colors",null),e.uiState.set("vis.colors",a),e.uiState.emit("colorChanged"))}),[e.uiState]),{visData:B,visParams:V,syncColors:N}=e,F=q(B,V),$=function(){const e=Object(_.g)();if(e.isDefault("dateFormat:tz")){return j.a.tz.guess()||j()().format("Z")}return e.get("dateFormat:tz","Browser")}(),H=F.xAxis.scale.type===l.ScaleType.Ordinal?void 0:(e=>{var t;const o=null!==(t=null==e?void 0:e.interval)&&void 0!==t?t:void 0,n=e.date?e.bounds:null;return n?{min:n.min,max:n.max,minInterval:o}:{minInterval:o,min:NaN,max:NaN}})(F.aspects.x.params),U=V.seriesParams.some((({type:e,data:{id:t}})=>e===c.ChartType.Histogram&&void 0!==F.aspects.y.find((({aggId:e})=>e===t)))),G=F.xAxis.scale.type===l.ScaleType.Ordinal?void 0:((e,{accessor:t,params:o},n,i,a)=>{if(t&&i&&"min"in i&&"max"in i&&"intervalESValue"in o&&"intervalESUnit"in o){const{interval:r,intervalESValue:l,intervalESUnit:c}=o,u=Object(s.uniq)(e.map((e=>e[t])).sort()),[p]=u,v=u[u.length-1],m=Math.min(p,i.min),f=Math.max(i.max-r,v);return{min:m,max:a?f:f+r,minInterval:Object(d.getAdjustedInterval)(u,l,c,n)}}return{minInterval:"interval"in o?o.interval:void 0,min:NaN,max:NaN}})(B.rows,F.aspects.x,$,H,U),K=Object(a.useMemo)((()=>{var e;return null!==(e=F.legend.position)&&void 0!==e?e:l.Position.Right}),[F.legend.position]),Y=Object(_.e)().useDarkMode(),X=((e,t=!1)=>Object(s.memoize)((({splitAccessors:o,yAccessor:n})=>{var i,a;const r=function(e,t){if(e.size<1)return[];const o=[];return e.forEach(((e,n)=>{const i=(null!=t?t:[]).find((({accessor:e})=>e===n));o.push(null!=i&&i.formatter?null==i?void 0:i.formatter(e):e)})),o}(o,e.series),l=null!==(i=null===(a=e.y.find((({accessor:e})=>e===n)))||void 0===a?void 0:a.title)&&void 0!==i?i:null;return l?t?0===r.length?l:`${r.join(" - ")}: ${l}`:r.length>0?r.join(" - "):l:null})))(F.aspects,F.aspects.y.length>1),W=null===(t=F.aspects.series)||void 0===t?void 0:t.map((({accessor:e,formatter:t})=>({accessor:e,formatter:t}))),Z=Object(a.useMemo)((()=>((e,t,o)=>{const n=[];return t?(e.forEach((e=>{let i="";null==t||t.forEach((({accessor:t,formatter:o})=>{if(!t)return;const n=o?o(e[t]):e[t];i?i+=` - ${n}`:i=n})),o.length>1?o.forEach((e=>{n.includes(`${i}: ${e.title}`)||n.push(`${i}: ${e.title}`)})):n.includes(i)||n.push(i)})),n):[]})(B.rows,W,F.aspects.y)),[F.aspects.y,W,B.rows]),J=Object(a.useCallback)((t=>{var o;const n=X(t);if(!n)return null;const i=null!==(o=e.uiState)&&void 0!==o&&o.get?e.uiState.get("vis.colors",{}):{};if(Object.keys(i).includes(n))return i[n];return(null==v?void 0:v.get(V.palette.name).getCategoricalColor([{name:n,rankAtDepth:W?Z.findIndex((e=>e===n)):F.aspects.y.findIndex((e=>e.accessor===t.yAccessor)),totalSeriesAtDepth:W?Z.length:F.aspects.y.length}],{maxDepth:1,totalSeries:W?Z.length:F.aspects.y.length,behindText:!1,syncColors:N}))||null}),[Z,F.aspects.y,X,e.uiState,W,N,V.palette.name,v]),ee=(te=F.aspects.x,null!==(oe=f("__customXAccessor__")(te))&&void 0!==oe?oe:()=>{var e;return null===(e=te.params)||void 0===e?void 0:e.defaultValue});var te,oe;const ne=Object(a.useMemo)((()=>F.aspects.series?Object(s.compact)(F.aspects.series.map(f(p))):[]),[F.aspects.series]),ie=F.aspects.splitColumn?f(p,!0)(F.aspects.splitColumn):void 0,ae=F.aspects.splitRow?f(p,!0)(F.aspects.splitRow):void 0,re=Object(a.useMemo)((()=>w(F,V.seriesParams,B.rows,X,J,$,ee,ne)),[F,J,X,ne,$,B.rows,V.seriesParams,ee]),le=Object(a.useMemo)((()=>((e,t,o,n,i)=>({anchor:r,color:l,onClose:s,onChange:c,seriesIdentifiers:[u]})=>{const p=o(u),v=null==i?void 0:i.get("vis.colors",{}),m=Object.keys(v).includes(p);let f=!1;const g=Object(a.useCallback)((()=>{null==s||s()}),[s]);return Object(x.jsx)(C.EuiOutsideClickDetector,{onOutsideClick:g},Object(x.jsx)(C.EuiWrappingPopover,{isOpen:!0,ownFocus:!0,display:"block",button:r,anchorPosition:S(e),closePopover:s,panelPaddingSize:"s"},Object(x.jsx)(d.ColorPicker,{color:"kibana_palette"===n?l:l.toLowerCase(),onChange:e=>{p&&(e&&c(e),t(e,p),e&&f||s())},label:p,useLegacyColors:"kibana_palette"===n,colorIsOverwritten:m,onKeyDown:e=>{13===e.keyCode&&(null==s||s()),f=!0}})))})(K,z,X,V.palette.name,e.uiState)),[X,K,e.uiState,z,V.palette.name]),se=V.dimensions.splitColumn?B.columns[V.dimensions.splitColumn[0].accessor]:V.dimensions.splitRow?B.columns[V.dimensions.splitRow[0].accessor]:void 0;return Object(x.jsx)("div",{className:"xyChart__container","data-test-subj":"visTypeXyChart"},Object(x.jsx)(d.LegendToggle,{onClick:R,showLegend:r,legendPosition:K}),Object(x.jsx)(l.Chart,{size:"100%",ref:h},Object(x.jsx)(Q,{splitColumnAccessor:ie,splitRowAccessor:ae,splitDimension:se}),Object(x.jsx)(M,i()({},F,{truncateLegend:V.truncateLegend,maxLegendLines:V.maxLegendLines,showLegend:r,onPointerUpdate:b,legendPosition:K,xDomain:H,adjustedXDomain:G,legendColorPicker:le,onElementClick:T(B,ee,ne,null!=ie?ie:ae),onBrushEnd:O(B,ee,"interval"in F.aspects.x.params),onRenderChange:y,legendAction:F.aspects.series&&(null!==(o=null===(n=F.aspects.series)||void 0===n?void 0:n.length)&&void 0!==o?o:0)>0?k((async e=>{if(!e)return!1;const t=await Object(_.b)().createFiltersFromValueClickAction(e.data);return Boolean(t.length)}),I(B,ee,ne),D,X):void 0})),Object(x.jsx)(P,F.thresholdLine),Object(x.jsx)(L,{enabled:F.showCurrentTime,isDarkMode:Y,domain:H}),Object(x.jsx)(E,{isFullBin:!F.enableHistogramMode,enabled:F.isTimeChart,isDarkMode:Y,domain:H,hideTooltips:!F.detailedTooltip,adjustedDomain:G}),Object(x.jsx)(A,F.xAxis),F.yAxes.map((e=>Object(x.jsx)(A,i()({key:e.id},e)))),re))};t.default=Object(a.memo)(ee)}])]);